{"ast":null,"code":"import React, { Component, useState, useRef, useEffect } from 'react';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction debounce(func, wait) {\n  var timeout;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      return func.apply(context, args);\n    }, wait);\n  };\n}\n\nfunction parentHasClass(element, className) {\n  while (element) {\n    if (element.classList && element.classList.contains(className)) {\n      return true;\n    }\n\n    element = element.parentElement;\n  }\n\n  return false;\n}\n\nfunction parentPosition(element) {\n  var rect = element.getBoundingClientRect();\n  return {\n    x: rect.left,\n    y: rect.top\n  };\n}\n\nfunction osm(x, y, z) {\n  var s = String.fromCharCode(97 + (x + y + z) % 3);\n  return \"https://\" + s + \".tile.openstreetmap.org/\" + z + \"/\" + x + \"/\" + y + \".png\";\n}\n\nvar ANIMATION_TIME = 300;\nvar DIAGONAL_THROW_TIME = 1500;\nvar SCROLL_PIXELS_FOR_ZOOM_LEVEL = 150;\nvar MIN_DRAG_FOR_THROW = 40;\nvar CLICK_TOLERANCE = 2;\nvar DOUBLE_CLICK_DELAY = 300;\nvar DEBOUNCE_DELAY = 60;\nvar PINCH_RELEASE_THROW_DELAY = 300;\nvar WARNING_DISPLAY_TIMEOUT = 300;\n\nvar NOOP = function NOOP() {\n  return true;\n};\n\nvar lng2tile = function lng2tile(lon, zoom) {\n  return (lon + 180) / 360 * Math.pow(2, zoom);\n};\n\nvar lat2tile = function lat2tile(lat, zoom) {\n  return (1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180)) / Math.PI) / 2 * Math.pow(2, zoom);\n};\n\nfunction tile2lng(x, z) {\n  return x / Math.pow(2, z) * 360 - 180;\n}\n\nfunction tile2lat(y, z) {\n  var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n  return 180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n}\n\nfunction getMousePixel(dom, event) {\n  var parent = parentPosition(dom);\n  return [event.clientX - parent.x, event.clientY - parent.y];\n}\n\nfunction easeOutQuad(t) {\n  return t * (2 - t);\n}\n\nvar absoluteMinMax = [tile2lat(Math.pow(2, 10), 10), tile2lat(0, 10), tile2lng(0, 10), tile2lng(Math.pow(2, 10), 10)];\nvar hasWindow = typeof window !== 'undefined';\nvar performanceNow = hasWindow && window.performance && window.performance.now ? function () {\n  return window.performance.now();\n} : function () {\n  var timeStart = new Date().getTime();\n  return function () {\n    return new Date().getTime() - timeStart;\n  };\n}();\n\nvar requestAnimationFrame = function requestAnimationFrame(callback) {\n  if (hasWindow) {\n    return (window.requestAnimationFrame || window.setTimeout)(callback);\n  } else {\n    callback(new Date().getTime());\n    return null;\n  }\n};\n\nvar cancelAnimationFrame = function cancelAnimationFrame(animFrame) {\n  return hasWindow && animFrame ? (window.cancelAnimationFrame || window.clearTimeout)(animFrame) : false;\n};\n\nfunction srcSet(dprs, url, x, y, z) {\n  if (!dprs || dprs.length === 0) {\n    return '';\n  }\n\n  return dprs.map(function (dpr) {\n    return url(x, y, z, dpr) + (dpr === 1 ? '' : \" \" + dpr + \"x\");\n  }).join(', ');\n}\n\nvar Map = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Map, _Component);\n\n  function Map(props) {\n    var _ref, _props$defaultZoom, _ref2, _props$defaultCenter, _ref3, _props$width, _ref4, _props$height;\n\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n    _this._dragStart = null;\n    _this._mouseDown = false;\n    _this._moveEvents = [];\n    _this._lastClick = null;\n    _this._lastTap = null;\n    _this._lastWheel = null;\n    _this._touchStartPixel = null;\n    _this._touchStartMidPoint = null;\n    _this._touchStartDistance = null;\n    _this._secondTouchEnd = null;\n    _this._warningClearTimeout = null;\n    _this._isAnimating = false;\n    _this._animationStart = null;\n    _this._animationEnd = null;\n    _this._zoomStart = null;\n    _this._centerTarget = null;\n    _this._zoomTarget = null;\n    _this._zoomAround = null;\n    _this._animFrame = null;\n    _this._boundsSynced = false;\n    _this._minMaxCache = null;\n    _this._resizeObserver = null;\n\n    _this.updateWidthHeight = function () {\n      if (_this._containerRef) {\n        var rect = _this._containerRef.getBoundingClientRect();\n\n        if (rect && rect.width > 0 && rect.height > 0) {\n          _this.setState({\n            width: rect.width,\n            height: rect.height\n          });\n\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    _this.wa = function () {\n      var _window;\n\n      return (_window = window).addEventListener.apply(_window, arguments);\n    };\n\n    _this.wr = function () {\n      var _window2;\n\n      return (_window2 = window).removeEventListener.apply(_window2, arguments);\n    };\n\n    _this.bindMouseEvents = function () {\n      _this.wa('mousedown', _this.handleMouseDown);\n\n      _this.wa('mouseup', _this.handleMouseUp);\n\n      _this.wa('mousemove', _this.handleMouseMove);\n    };\n\n    _this.bindTouchEvents = function () {\n      _this.wa('touchstart', _this.handleTouchStart, {\n        passive: false\n      });\n\n      _this.wa('touchmove', _this.handleTouchMove, {\n        passive: false\n      });\n\n      _this.wa('touchend', _this.handleTouchEnd, {\n        passive: false\n      });\n    };\n\n    _this.unbindMouseEvents = function () {\n      _this.wr('mousedown', _this.handleMouseDown);\n\n      _this.wr('mouseup', _this.handleMouseUp);\n\n      _this.wr('mousemove', _this.handleMouseMove);\n    };\n\n    _this.unbindTouchEvents = function () {\n      _this.wr('touchstart', _this.handleTouchStart);\n\n      _this.wr('touchmove', _this.handleTouchMove);\n\n      _this.wr('touchend', _this.handleTouchEnd);\n    };\n\n    _this.bindResizeEvent = function () {\n      _this.wa('resize', _this.updateWidthHeight);\n    };\n\n    _this.unbindResizeEvent = function () {\n      _this.wr('resize', _this.updateWidthHeight);\n    };\n\n    _this.bindWheelEvent = function () {\n      if (_this._containerRef) {\n        _this._containerRef.addEventListener('wheel', _this.handleWheel, {\n          passive: false\n        });\n      }\n    };\n\n    _this.unbindWheelEvent = function () {\n      if (_this._containerRef) {\n        _this._containerRef.removeEventListener('wheel', _this.handleWheel);\n      }\n    };\n\n    _this.setCenterZoomTarget = function (center, zoom, fromProps, zoomAround, animationDuration) {\n      if (fromProps === void 0) {\n        fromProps = false;\n      }\n\n      if (zoomAround === void 0) {\n        zoomAround = null;\n      }\n\n      if (animationDuration === void 0) {\n        animationDuration = ANIMATION_TIME;\n      }\n\n      if (_this.props.animate && (!fromProps || _this.distanceInScreens(center, zoom, _this.state.center, _this.state.zoom) <= _this.props.animateMaxScreens)) {\n        if (_this._isAnimating) {\n          cancelAnimationFrame(_this._animFrame);\n\n          var _this$animationStep = _this.animationStep(performanceNow()),\n              centerStep = _this$animationStep.centerStep,\n              zoomStep = _this$animationStep.zoomStep;\n\n          _this._centerStart = centerStep;\n          _this._zoomStart = zoomStep;\n        } else {\n          _this._isAnimating = true;\n          _this._centerStart = _this.limitCenterAtZoom([_this._lastCenter[0], _this._lastCenter[1]], _this._lastZoom);\n          _this._zoomStart = _this._lastZoom;\n\n          _this.onAnimationStart();\n        }\n\n        _this._animationStart = performanceNow();\n        _this._animationEnd = _this._animationStart + animationDuration;\n\n        if (zoomAround) {\n          _this._zoomAround = zoomAround;\n          _this._centerTarget = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n        } else {\n          _this._zoomAround = null;\n          _this._centerTarget = center;\n        }\n\n        _this._zoomTarget = zoom;\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      } else {\n        _this.stopAnimating();\n\n        if (zoomAround) {\n          var _center = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n\n          _this.setCenterZoom(_center, zoom, fromProps);\n        } else {\n          _this.setCenterZoom(center || _this.state.center, zoom, fromProps);\n        }\n      }\n    };\n\n    _this.setCenterZoomForChildren = function (center, zoom) {\n      _this.setCenterZoomTarget(center || _this.state.center, zoom || _this.state.zoom, true);\n    };\n\n    _this.distanceInScreens = function (centerTarget, zoomTarget, center, zoom) {\n      var _this$state = _this.state,\n          width = _this$state.width,\n          height = _this$state.height;\n\n      var l1 = _this.latLngToPixel(center, center, zoom);\n\n      var l2 = _this.latLngToPixel(centerTarget, center, zoom);\n\n      var z1 = _this.latLngToPixel(center, center, zoomTarget);\n\n      var z2 = _this.latLngToPixel(centerTarget, center, zoomTarget);\n\n      var w = (Math.abs(l1[0] - l2[0]) + Math.abs(z1[0] - z2[0])) / 2 / width;\n      var h = (Math.abs(l1[1] - l2[1]) + Math.abs(z1[1] - z2[1])) / 2 / height;\n      return Math.sqrt(w * w + h * h);\n    };\n\n    _this.animationStep = function (timestamp) {\n      if (!_this._animationEnd || !_this._animationStart || !_this._zoomTarget || !_this._zoomStart || !_this._centerStart || !_this._centerTarget) {\n        return {\n          centerStep: _this.state.center,\n          zoomStep: _this.state.zoom\n        };\n      }\n\n      var length = _this._animationEnd - _this._animationStart;\n      var progress = Math.max(timestamp - _this._animationStart, 0);\n      var percentage = easeOutQuad(progress / length);\n      var zoomDiff = (_this._zoomTarget - _this._zoomStart) * percentage;\n      var zoomStep = _this._zoomStart + zoomDiff;\n\n      if (_this._zoomAround) {\n        var centerStep = _this.calculateZoomCenter(_this._centerStart, _this._zoomAround, _this._zoomStart, zoomStep);\n\n        return {\n          centerStep: centerStep,\n          zoomStep: zoomStep\n        };\n      } else {\n        var _centerStep = [_this._centerStart[0] + (_this._centerTarget[0] - _this._centerStart[0]) * percentage, _this._centerStart[1] + (_this._centerTarget[1] - _this._centerStart[1]) * percentage];\n        return {\n          centerStep: _centerStep,\n          zoomStep: zoomStep\n        };\n      }\n    };\n\n    _this.animate = function (timestamp) {\n      if (!_this._animationEnd || timestamp >= _this._animationEnd) {\n        _this._isAnimating = false;\n\n        _this.setCenterZoom(_this._centerTarget, _this._zoomTarget, true);\n\n        _this.onAnimationStop();\n      } else {\n        var _this$animationStep2 = _this.animationStep(timestamp),\n            centerStep = _this$animationStep2.centerStep,\n            zoomStep = _this$animationStep2.zoomStep;\n\n        _this.setCenterZoom(centerStep, zoomStep);\n\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      }\n    };\n\n    _this.stopAnimating = function () {\n      if (_this._isAnimating) {\n        _this._isAnimating = false;\n\n        _this.onAnimationStop();\n\n        cancelAnimationFrame(_this._animFrame);\n      }\n    };\n\n    _this.limitCenterAtZoom = function (center, zoom) {\n      var minMax = _this.getBoundsMinMax(zoom || _this.state.zoom);\n\n      return [Math.max(Math.min(!center || isNaN(center[0]) ? _this.state.center[0] : center[0], minMax[1]), minMax[0]), Math.max(Math.min(!center || isNaN(center[1]) ? _this.state.center[1] : center[1], minMax[3]), minMax[2])];\n    };\n\n    _this.onAnimationStart = function () {\n      _this.props.onAnimationStart && _this.props.onAnimationStart();\n    };\n\n    _this.onAnimationStop = function () {\n      _this.props.onAnimationStop && _this.props.onAnimationStop();\n    };\n\n    _this.setCenterZoom = function (center, zoom, animationEnded) {\n      if (animationEnded === void 0) {\n        animationEnded = false;\n      }\n\n      var limitedCenter = _this.limitCenterAtZoom(center, zoom);\n\n      if (zoom && Math.round(_this.state.zoom) !== Math.round(zoom)) {\n        var tileValues = _this.tileValues(_this.state);\n\n        var nextValues = _this.tileValues({\n          center: limitedCenter,\n          zoom: zoom,\n          width: _this.state.width,\n          height: _this.state.height\n        });\n\n        var oldTiles = _this.state.oldTiles;\n\n        _this.setState({\n          oldTiles: oldTiles.filter(function (o) {\n            return o.roundedZoom !== tileValues.roundedZoom;\n          }).concat(tileValues)\n        }, NOOP);\n\n        var loadTracker = {};\n\n        for (var x = nextValues.tileMinX; x <= nextValues.tileMaxX; x++) {\n          for (var y = nextValues.tileMinY; y <= nextValues.tileMaxY; y++) {\n            var key = x + \"-\" + y + \"-\" + nextValues.roundedZoom;\n            loadTracker[key] = false;\n          }\n        }\n\n        _this._loadTracker = loadTracker;\n      }\n\n      _this.setState({\n        center: limitedCenter,\n        zoom: zoom || _this.state.zoom\n      }, NOOP);\n\n      var maybeZoom = _this.props.zoom ? _this.props.zoom : _this._lastZoom;\n      var maybeCenter = _this.props.center ? _this.props.center : _this._lastCenter;\n\n      if (zoom && (animationEnded || Math.abs(maybeZoom - zoom) > 0.001 || Math.abs(maybeCenter[0] - limitedCenter[0]) > 0.00001 || Math.abs(maybeCenter[1] - limitedCenter[1]) > 0.00001)) {\n        _this._lastZoom = zoom;\n        _this._lastCenter = [].concat(limitedCenter);\n\n        _this.syncToProps(limitedCenter, zoom);\n      }\n    };\n\n    _this.getBoundsMinMax = function (zoom) {\n      if (_this.props.limitBounds === 'center') {\n        return absoluteMinMax;\n      }\n\n      var _this$state2 = _this.state,\n          width = _this$state2.width,\n          height = _this$state2.height;\n\n      if (_this._minMaxCache && _this._minMaxCache[0] === zoom && _this._minMaxCache[1] === width && _this._minMaxCache[2] === height) {\n        return _this._minMaxCache[3];\n      }\n\n      var pixelsAtZoom = Math.pow(2, zoom) * 256;\n      var minLng = width > pixelsAtZoom ? 0 : tile2lng(width / 512, zoom);\n      var minLat = height > pixelsAtZoom ? 0 : tile2lat(Math.pow(2, zoom) - height / 512, zoom);\n      var maxLng = width > pixelsAtZoom ? 0 : tile2lng(Math.pow(2, zoom) - width / 512, zoom);\n      var maxLat = height > pixelsAtZoom ? 0 : tile2lat(height / 512, zoom);\n      var minMax = [minLat, maxLat, minLng, maxLng];\n      _this._minMaxCache = [zoom, width, height, minMax];\n      return minMax;\n    };\n\n    _this.imageLoaded = function (key) {\n      if (_this._loadTracker && key in _this._loadTracker) {\n        _this._loadTracker[key] = true;\n        var unloadedCount = Object.values(_this._loadTracker).filter(function (v) {\n          return !v;\n        }).length;\n\n        if (unloadedCount === 0) {\n          _this.setState({\n            oldTiles: []\n          }, NOOP);\n        }\n      }\n    };\n\n    _this.handleTouchStart = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      if (event.target && parentHasClass(event.target, 'pigeon-drag-block')) {\n        return;\n      }\n\n      if (event.touches.length === 1) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.coordsInside(pixel)) {\n          _this._touchStartPixel = [pixel];\n\n          if (!_this.props.twoFingerDrag) {\n            _this.stopAnimating();\n\n            if (_this._lastTap && performanceNow() - _this._lastTap < DOUBLE_CLICK_DELAY) {\n              event.preventDefault();\n\n              var latLngNow = _this.pixelToLatLng(_this._touchStartPixel[0]);\n\n              _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n            } else {\n              _this._lastTap = performanceNow();\n\n              _this.trackMoveEvents(pixel);\n            }\n          }\n        }\n      } else if (event.touches.length === 2 && _this._touchStartPixel) {\n        event.preventDefault();\n\n        _this.stopTrackingMoveEvents();\n\n        if (_this.state.pixelDelta || _this.state.zoomDelta) {\n          _this.sendDeltaChange();\n        }\n\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n        _this._touchStartPixel = [t1, t2];\n        _this._touchStartMidPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        _this._touchStartDistance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n      }\n    };\n\n    _this.handleTouchMove = function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n\n      if (event.touches.length === 1 && _this._touchStartPixel) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.props.twoFingerDrag) {\n          if (_this.coordsInside(pixel)) {\n            _this.showWarning('fingers');\n          }\n        } else {\n          event.preventDefault();\n\n          _this.trackMoveEvents(pixel);\n\n          _this.setState({\n            pixelDelta: [pixel[0] - _this._touchStartPixel[0][0], pixel[1] - _this._touchStartPixel[0][1]]\n          }, NOOP);\n        }\n      } else if (event.touches.length === 2 && _this._touchStartPixel && _this._touchStartMidPoint && _this._touchStartDistance) {\n        var _this$state3 = _this.state,\n            width = _this$state3.width,\n            height = _this$state3.height,\n            zoom = _this$state3.zoom;\n        event.preventDefault();\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n        var midPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        var midPointDiff = [midPoint[0] - _this._touchStartMidPoint[0], midPoint[1] - _this._touchStartMidPoint[1]];\n        var distance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n        var zoomDelta = Math.max(_this.props.minZoom, Math.min(_this.props.maxZoom, zoom + Math.log2(distance / _this._touchStartDistance))) - zoom;\n        var scale = Math.pow(2, zoomDelta);\n        var centerDiffDiff = [(width / 2 - midPoint[0]) * (scale - 1), (height / 2 - midPoint[1]) * (scale - 1)];\n\n        _this.setState({\n          zoomDelta: zoomDelta,\n          pixelDelta: [centerDiffDiff[0] + midPointDiff[0] * scale, centerDiffDiff[1] + midPointDiff[1] * scale]\n        }, NOOP);\n      }\n    };\n\n    _this.handleTouchEnd = function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n\n      if (_this._touchStartPixel) {\n        var _this$props = _this.props,\n            zoomSnap = _this$props.zoomSnap,\n            twoFingerDrag = _this$props.twoFingerDrag,\n            minZoom = _this$props.minZoom,\n            maxZoom = _this$props.maxZoom;\n        var zoomDelta = _this.state.zoomDelta;\n\n        var _this$sendDeltaChange = _this.sendDeltaChange(),\n            center = _this$sendDeltaChange.center,\n            zoom = _this$sendDeltaChange.zoom;\n\n        if (event.touches.length === 0) {\n          if (twoFingerDrag) {\n            _this.clearWarning();\n          } else {\n            var oldTouchPixel = _this._touchStartPixel[0];\n            var newTouchPixel = getMousePixel(_this._containerRef, event.changedTouches[0]);\n\n            if (Math.abs(oldTouchPixel[0] - newTouchPixel[0]) > CLICK_TOLERANCE || Math.abs(oldTouchPixel[1] - newTouchPixel[1]) > CLICK_TOLERANCE) {\n              if (!_this._secondTouchEnd || performanceNow() - _this._secondTouchEnd > PINCH_RELEASE_THROW_DELAY) {\n                event.preventDefault();\n\n                _this.throwAfterMoving(newTouchPixel, center, zoom);\n              }\n            }\n\n            _this._touchStartPixel = null;\n            _this._secondTouchEnd = null;\n          }\n        } else if (event.touches.length === 1) {\n          event.preventDefault();\n          var touch = getMousePixel(_this._containerRef, event.touches[0]);\n          _this._secondTouchEnd = performanceNow();\n          _this._touchStartPixel = [touch];\n\n          _this.trackMoveEvents(touch);\n\n          if (zoomSnap) {\n            var latLng = _this._touchStartMidPoint ? _this.pixelToLatLng(_this._touchStartMidPoint) : _this.state.center;\n            var zoomTarget;\n\n            if (twoFingerDrag && Math.round(_this.state.zoom) === Math.round(_this.state.zoom + zoomDelta)) {\n              zoomTarget = Math.round(_this.state.zoom);\n            } else {\n              zoomTarget = zoomDelta > 0 ? Math.ceil(_this.state.zoom) : Math.floor(_this.state.zoom);\n            }\n\n            var _zoom = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n            _this.setCenterZoomTarget(latLng, _zoom, false, latLng);\n          }\n        }\n      }\n    };\n\n    _this.handleMouseDown = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      var pixel = getMousePixel(_this._containerRef, event);\n\n      if (event.button === 0 && (!event.target || !parentHasClass(event.target, 'pigeon-drag-block')) && _this.coordsInside(pixel)) {\n        _this.stopAnimating();\n\n        event.preventDefault();\n\n        if (_this._lastClick && performanceNow() - _this._lastClick < DOUBLE_CLICK_DELAY) {\n          if (!parentHasClass(event.target, 'pigeon-click-block')) {\n            var latLngNow = _this.pixelToLatLng(_this._mousePosition || pixel);\n\n            _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n          }\n        } else {\n          _this._lastClick = performanceNow();\n          _this._mouseDown = true;\n          _this._dragStart = pixel;\n\n          _this.trackMoveEvents(pixel);\n        }\n      }\n    };\n\n    _this.handleMouseMove = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (_this._mouseDown && _this._dragStart) {\n        _this.trackMoveEvents(_this._mousePosition);\n\n        _this.setState({\n          pixelDelta: [_this._mousePosition[0] - _this._dragStart[0], _this._mousePosition[1] - _this._dragStart[1]]\n        }, NOOP);\n      }\n    };\n\n    _this.handleMouseUp = function (event) {\n      if (!_this._containerRef) {\n        _this._mouseDown = false;\n        return;\n      }\n\n      var pixelDelta = _this.state.pixelDelta;\n\n      if (_this._mouseDown) {\n        _this._mouseDown = false;\n        var pixel = getMousePixel(_this._containerRef, event);\n\n        if (_this.props.onClick && (!event.target || !parentHasClass(event.target, 'pigeon-click-block')) && (!pixelDelta || Math.abs(pixelDelta[0]) + Math.abs(pixelDelta[1]) <= CLICK_TOLERANCE)) {\n          var latLng = _this.pixelToLatLng(pixel);\n\n          _this.props.onClick({\n            event: event,\n            latLng: latLng,\n            pixel: pixel\n          });\n\n          _this.setState({\n            pixelDelta: undefined\n          }, NOOP);\n        } else {\n          var _this$sendDeltaChange2 = _this.sendDeltaChange(),\n              center = _this$sendDeltaChange2.center,\n              zoom = _this$sendDeltaChange2.zoom;\n\n          _this.throwAfterMoving(pixel, center, zoom);\n        }\n      }\n    };\n\n    _this.stopTrackingMoveEvents = function () {\n      _this._moveEvents = [];\n    };\n\n    _this.trackMoveEvents = function (coords) {\n      var timestamp = performanceNow();\n\n      if (_this._moveEvents.length === 0 || timestamp - _this._moveEvents[_this._moveEvents.length - 1].timestamp > 40) {\n        _this._moveEvents.push({\n          timestamp: timestamp,\n          coords: coords\n        });\n\n        if (_this._moveEvents.length > 2) {\n          _this._moveEvents.shift();\n        }\n      }\n    };\n\n    _this.throwAfterMoving = function (coords, center, zoom) {\n      var _this$state4 = _this.state,\n          width = _this$state4.width,\n          height = _this$state4.height;\n      var animate = _this.props.animate;\n      var timestamp = performanceNow();\n\n      var lastEvent = _this._moveEvents.shift();\n\n      if (lastEvent && animate) {\n        var deltaMs = Math.max(timestamp - lastEvent.timestamp, 1);\n        var delta = [(coords[0] - lastEvent.coords[0]) / deltaMs * 120, (coords[1] - lastEvent.coords[1]) / deltaMs * 120];\n        var distance = Math.sqrt(delta[0] * delta[0] + delta[1] * delta[1]);\n\n        if (distance > MIN_DRAG_FOR_THROW) {\n          var diagonal = Math.sqrt(width * width + height * height);\n          var throwTime = DIAGONAL_THROW_TIME * distance / diagonal;\n          var lng = tile2lng(lng2tile(center[1], zoom) - delta[0] / 256.0, zoom);\n          var lat = tile2lat(lat2tile(center[0], zoom) - delta[1] / 256.0, zoom);\n\n          _this.setCenterZoomTarget([lat, lng], zoom, false, null, throwTime);\n        }\n      }\n\n      _this.stopTrackingMoveEvents();\n    };\n\n    _this.sendDeltaChange = function () {\n      var _this$state5 = _this.state,\n          center = _this$state5.center,\n          zoom = _this$state5.zoom,\n          pixelDelta = _this$state5.pixelDelta,\n          zoomDelta = _this$state5.zoomDelta;\n      var lat = center[0];\n      var lng = center[1];\n\n      if (pixelDelta || zoomDelta !== 0) {\n        lng = tile2lng(lng2tile(center[1], zoom + zoomDelta) - (pixelDelta ? pixelDelta[0] / 256.0 : 0), zoom + zoomDelta);\n        lat = tile2lat(lat2tile(center[0], zoom + zoomDelta) - (pixelDelta ? pixelDelta[1] / 256.0 : 0), zoom + zoomDelta);\n\n        _this.setCenterZoom([lat, lng], zoom + zoomDelta);\n      }\n\n      _this.setState({\n        pixelDelta: undefined,\n        zoomDelta: 0\n      }, NOOP);\n\n      return {\n        center: _this.limitCenterAtZoom([lat, lng], zoom + zoomDelta),\n        zoom: zoom + zoomDelta\n      };\n    };\n\n    _this.getBounds = function (center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state6 = _this.state,\n          width = _this$state6.width,\n          height = _this$state6.height;\n      return {\n        ne: _this.pixelToLatLng([width - 1, 0], center, zoom),\n        sw: _this.pixelToLatLng([0, height - 1], center, zoom)\n      };\n    };\n\n    _this.syncToProps = function (center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.state.zoom;\n      }\n\n      var onBoundsChanged = _this.props.onBoundsChanged;\n\n      if (onBoundsChanged) {\n        var bounds = _this.getBounds(center, zoom);\n\n        onBoundsChanged({\n          center: center,\n          zoom: zoom,\n          bounds: bounds,\n          initial: !_this._boundsSynced\n        });\n        _this._boundsSynced = true;\n      }\n    };\n\n    _this.handleWheel = function (event) {\n      var _this$props2 = _this.props,\n          mouseEvents = _this$props2.mouseEvents,\n          metaWheelZoom = _this$props2.metaWheelZoom,\n          zoomSnap = _this$props2.zoomSnap,\n          animate = _this$props2.animate;\n\n      if (!mouseEvents) {\n        return;\n      }\n\n      if (!metaWheelZoom || event.metaKey || event.ctrlKey) {\n        event.preventDefault();\n        var addToZoom = -event.deltaY / SCROLL_PIXELS_FOR_ZOOM_LEVEL;\n\n        if (!zoomSnap && _this._zoomTarget) {\n          var stillToAdd = _this._zoomTarget - _this.state.zoom;\n\n          _this.zoomAroundMouse(addToZoom + stillToAdd, event);\n        } else {\n          if (animate) {\n            _this.zoomAroundMouse(addToZoom, event);\n          } else {\n            if (!_this._lastWheel || performanceNow() - _this._lastWheel > ANIMATION_TIME) {\n              _this._lastWheel = performanceNow();\n\n              _this.zoomAroundMouse(addToZoom, event);\n            }\n          }\n        }\n      } else {\n        _this.showWarning('wheel');\n      }\n    };\n\n    _this.showWarning = function (warningType) {\n      if (!_this.state.showWarning || _this.state.warningType !== warningType) {\n        _this.setState({\n          showWarning: true,\n          warningType: warningType\n        });\n      }\n\n      if (_this._warningClearTimeout) {\n        window.clearTimeout(_this._warningClearTimeout);\n      }\n\n      _this._warningClearTimeout = window.setTimeout(_this.clearWarning, WARNING_DISPLAY_TIMEOUT);\n    };\n\n    _this.clearWarning = function () {\n      if (_this.state.showWarning) {\n        _this.setState({\n          showWarning: false\n        });\n      }\n    };\n\n    _this.zoomAroundMouse = function (zoomDiff, event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      var zoom = _this.state.zoom;\n      var _this$props3 = _this.props,\n          minZoom = _this$props3.minZoom,\n          maxZoom = _this$props3.maxZoom,\n          zoomSnap = _this$props3.zoomSnap;\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (!_this._mousePosition || zoom === minZoom && zoomDiff < 0 || zoom === maxZoom && zoomDiff > 0) {\n        return;\n      }\n\n      var latLngNow = _this.pixelToLatLng(_this._mousePosition);\n\n      var zoomTarget = zoom + zoomDiff;\n\n      if (zoomSnap) {\n        zoomTarget = zoomDiff < 0 ? Math.floor(zoomTarget) : Math.ceil(zoomTarget);\n      }\n\n      zoomTarget = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n      _this.setCenterZoomTarget(null, zoomTarget, false, latLngNow);\n    };\n\n    _this.zoomPlusDelta = function () {\n      return _this.state.zoom + _this.state.zoomDelta;\n    };\n\n    _this.pixelToLatLng = function (pixel, center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state7 = _this.state,\n          width = _this$state7.width,\n          height = _this$state7.height,\n          pixelDelta = _this$state7.pixelDelta;\n      var pointDiff = [(pixel[0] - width / 2 - (pixelDelta ? pixelDelta[0] : 0)) / 256.0, (pixel[1] - height / 2 - (pixelDelta ? pixelDelta[1] : 0)) / 256.0];\n      var tileX = lng2tile(center[1], zoom) + pointDiff[0];\n      var tileY = lat2tile(center[0], zoom) + pointDiff[1];\n      return [Math.max(absoluteMinMax[0], Math.min(absoluteMinMax[1], tile2lat(tileY, zoom))), Math.max(absoluteMinMax[2], Math.min(absoluteMinMax[3], tile2lng(tileX, zoom)))];\n    };\n\n    _this.latLngToPixel = function (latLng, center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state8 = _this.state,\n          width = _this$state8.width,\n          height = _this$state8.height,\n          pixelDelta = _this$state8.pixelDelta;\n      var tileCenterX = lng2tile(center[1], zoom);\n      var tileCenterY = lat2tile(center[0], zoom);\n      var tileX = lng2tile(latLng[1], zoom);\n      var tileY = lat2tile(latLng[0], zoom);\n      return [(tileX - tileCenterX) * 256.0 + width / 2 + (pixelDelta ? pixelDelta[0] : 0), (tileY - tileCenterY) * 256.0 + height / 2 + (pixelDelta ? pixelDelta[1] : 0)];\n    };\n\n    _this.calculateZoomCenter = function (center, coords, oldZoom, newZoom) {\n      var _this$state9 = _this.state,\n          width = _this$state9.width,\n          height = _this$state9.height;\n\n      var pixelBefore = _this.latLngToPixel(coords, center, oldZoom);\n\n      var pixelAfter = _this.latLngToPixel(coords, center, newZoom);\n\n      var newCenter = _this.pixelToLatLng([width / 2 + pixelAfter[0] - pixelBefore[0], height / 2 + pixelAfter[1] - pixelBefore[1]], center, newZoom);\n\n      return _this.limitCenterAtZoom(newCenter, newZoom);\n    };\n\n    _this.setRef = function (dom) {\n      _this._containerRef = dom;\n    };\n\n    _this.syncToProps = debounce(_this.syncToProps, DEBOUNCE_DELAY);\n    _this._lastZoom = (_ref = (_props$defaultZoom = props.defaultZoom) !== null && _props$defaultZoom !== void 0 ? _props$defaultZoom : props.zoom) !== null && _ref !== void 0 ? _ref : 14;\n    _this._lastCenter = (_ref2 = (_props$defaultCenter = props.defaultCenter) !== null && _props$defaultCenter !== void 0 ? _props$defaultCenter : props.center) !== null && _ref2 !== void 0 ? _ref2 : [0, 0];\n    _this.state = {\n      zoom: _this._lastZoom,\n      center: _this._lastCenter,\n      width: (_ref3 = (_props$width = props.width) !== null && _props$width !== void 0 ? _props$width : props.defaultWidth) !== null && _ref3 !== void 0 ? _ref3 : -1,\n      height: (_ref4 = (_props$height = props.height) !== null && _props$height !== void 0 ? _props$height : props.defaultHeight) !== null && _ref4 !== void 0 ? _ref4 : -1,\n      zoomDelta: 0,\n      pixelDelta: undefined,\n      oldTiles: [],\n      showWarning: false,\n      warningType: undefined\n    };\n    return _this;\n  }\n\n  var _proto = Map.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    this.props.mouseEvents && this.bindMouseEvents();\n    this.props.touchEvents && this.bindTouchEvents();\n\n    if (!this.props.width || !this.props.height) {\n      if (!this.updateWidthHeight()) {\n        requestAnimationFrame(this.updateWidthHeight);\n      }\n\n      this.bindResizeEvent();\n    }\n\n    this.bindWheelEvent();\n    this.syncToProps();\n\n    if (typeof window.ResizeObserver !== 'undefined') {\n      this._resizeObserver = new window.ResizeObserver(function () {\n        _this2.updateWidthHeight();\n      });\n\n      this._resizeObserver.observe(this._containerRef);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.props.mouseEvents && this.unbindMouseEvents();\n    this.props.touchEvents && this.unbindTouchEvents();\n    this.unbindWheelEvent();\n\n    if (!this.props.width || !this.props.height) {\n      this.unbindResizeEvent();\n    }\n\n    if (this._resizeObserver) {\n      this._resizeObserver.disconnect();\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _prevProps$center;\n\n    if (this.props.mouseEvents !== prevProps.mouseEvents) {\n      this.props.mouseEvents ? this.bindMouseEvents() : this.unbindMouseEvents();\n    }\n\n    if (this.props.touchEvents !== prevProps.touchEvents) {\n      this.props.touchEvents ? this.bindTouchEvents() : this.unbindTouchEvents();\n    }\n\n    if (this.props.width && this.props.width !== prevProps.width) {\n      this.setState({\n        width: this.props.width\n      });\n    }\n\n    if (this.props.height && this.props.height !== prevProps.height) {\n      this.setState({\n        height: this.props.height\n      });\n    }\n\n    if (!this.props.center && !this.props.zoom) {\n      return;\n    }\n\n    if ((!this.props.center || this.props.center[0] === (prevProps === null || prevProps === void 0 ? void 0 : (_prevProps$center = prevProps.center) === null || _prevProps$center === void 0 ? void 0 : _prevProps$center[0]) && this.props.center[1] === prevProps.center[1]) && this.props.zoom === prevProps.zoom) {\n      return;\n    }\n\n    var currentCenter = this._isAnimating ? this._centerTarget : this.state.center;\n    var currentZoom = this._isAnimating ? this._zoomTarget : this.state.zoom;\n\n    if (currentCenter && currentZoom) {\n      var _this$props$center, _this$props$zoom;\n\n      var nextCenter = (_this$props$center = this.props.center) !== null && _this$props$center !== void 0 ? _this$props$center : currentCenter;\n      var nextZoom = (_this$props$zoom = this.props.zoom) !== null && _this$props$zoom !== void 0 ? _this$props$zoom : currentZoom;\n\n      if (Math.abs(nextZoom - currentZoom) > 0.001 || Math.abs(nextCenter[0] - currentCenter[0]) > 0.0001 || Math.abs(nextCenter[1] - currentCenter[1]) > 0.0001) {\n        this.setCenterZoomTarget(nextCenter, nextZoom, true);\n      }\n    }\n  };\n\n  _proto.coordsInside = function coordsInside(pixel) {\n    var _this$state10 = this.state,\n        width = _this$state10.width,\n        height = _this$state10.height;\n\n    if (pixel[0] < 0 || pixel[1] < 0 || pixel[0] >= width || pixel[1] >= height) {\n      return false;\n    }\n\n    var parent = this._containerRef;\n\n    if (parent) {\n      var pos = parentPosition(parent);\n      var element = document.elementFromPoint(pixel[0] + pos.x, pixel[1] + pos.y);\n      return parent === element || parent.contains(element);\n    } else {\n      return false;\n    }\n  };\n\n  _proto.tileValues = function tileValues(_ref5) {\n    var center = _ref5.center,\n        zoom = _ref5.zoom,\n        pixelDelta = _ref5.pixelDelta,\n        zoomDelta = _ref5.zoomDelta,\n        width = _ref5.width,\n        height = _ref5.height;\n    var roundedZoom = Math.round(zoom + (zoomDelta || 0));\n    var zoomDiff = zoom + (zoomDelta || 0) - roundedZoom;\n    var scale = Math.pow(2, zoomDiff);\n    var scaleWidth = width / scale;\n    var scaleHeight = height / scale;\n    var tileCenterX = lng2tile(center[1], roundedZoom) - (pixelDelta ? pixelDelta[0] / 256.0 / scale : 0);\n    var tileCenterY = lat2tile(center[0], roundedZoom) - (pixelDelta ? pixelDelta[1] / 256.0 / scale : 0);\n    var halfWidth = scaleWidth / 2 / 256.0;\n    var halfHeight = scaleHeight / 2 / 256.0;\n    var tileMinX = Math.floor(tileCenterX - halfWidth);\n    var tileMaxX = Math.floor(tileCenterX + halfWidth);\n    var tileMinY = Math.floor(tileCenterY - halfHeight);\n    var tileMaxY = Math.floor(tileCenterY + halfHeight);\n    return {\n      tileMinX: tileMinX,\n      tileMaxX: tileMaxX,\n      tileMinY: tileMinY,\n      tileMaxY: tileMaxY,\n      tileCenterX: tileCenterX,\n      tileCenterY: tileCenterY,\n      roundedZoom: roundedZoom,\n      zoomDelta: zoomDelta || 0,\n      scaleWidth: scaleWidth,\n      scaleHeight: scaleHeight,\n      scale: scale\n    };\n  };\n\n  _proto.renderTiles = function renderTiles() {\n    var _this3 = this;\n\n    var _this$state11 = this.state,\n        oldTiles = _this$state11.oldTiles,\n        width = _this$state11.width,\n        height = _this$state11.height;\n    var dprs = this.props.dprs;\n    var mapUrl = this.props.provider || osm;\n\n    var _this$tileValues = this.tileValues(this.state),\n        tileMinX = _this$tileValues.tileMinX,\n        tileMaxX = _this$tileValues.tileMaxX,\n        tileMinY = _this$tileValues.tileMinY,\n        tileMaxY = _this$tileValues.tileMaxY,\n        tileCenterX = _this$tileValues.tileCenterX,\n        tileCenterY = _this$tileValues.tileCenterY,\n        roundedZoom = _this$tileValues.roundedZoom,\n        scaleWidth = _this$tileValues.scaleWidth,\n        scaleHeight = _this$tileValues.scaleHeight,\n        scale = _this$tileValues.scale;\n\n    var tiles = [];\n\n    for (var i = 0; i < oldTiles.length; i++) {\n      var old = oldTiles[i];\n      var zoomDiff = old.roundedZoom - roundedZoom;\n\n      if (Math.abs(zoomDiff) > 4 || zoomDiff === 0) {\n        continue;\n      }\n\n      var pow = 1 / Math.pow(2, zoomDiff);\n      var xDiff = -(tileMinX - old.tileMinX * pow) * 256;\n      var yDiff = -(tileMinY - old.tileMinY * pow) * 256;\n\n      var _xMin = Math.max(old.tileMinX, 0);\n\n      var _yMin = Math.max(old.tileMinY, 0);\n\n      var _xMax = Math.min(old.tileMaxX, Math.pow(2, old.roundedZoom) - 1);\n\n      var _yMax = Math.min(old.tileMaxY, Math.pow(2, old.roundedZoom) - 1);\n\n      for (var x = _xMin; x <= _xMax; x++) {\n        for (var y = _yMin; y <= _yMax; y++) {\n          tiles.push({\n            key: x + \"-\" + y + \"-\" + old.roundedZoom,\n            url: mapUrl(x, y, old.roundedZoom),\n            srcSet: srcSet(dprs, mapUrl, x, y, old.roundedZoom),\n            left: xDiff + (x - old.tileMinX) * 256 * pow,\n            top: yDiff + (y - old.tileMinY) * 256 * pow,\n            width: 256 * pow,\n            height: 256 * pow,\n            active: false\n          });\n        }\n      }\n    }\n\n    var xMin = Math.max(tileMinX, 0);\n    var yMin = Math.max(tileMinY, 0);\n    var xMax = Math.min(tileMaxX, Math.pow(2, roundedZoom) - 1);\n    var yMax = Math.min(tileMaxY, Math.pow(2, roundedZoom) - 1);\n\n    for (var _x = xMin; _x <= xMax; _x++) {\n      for (var _y = yMin; _y <= yMax; _y++) {\n        tiles.push({\n          key: _x + \"-\" + _y + \"-\" + roundedZoom,\n          url: mapUrl(_x, _y, roundedZoom),\n          srcSet: srcSet(dprs, mapUrl, _x, _y, roundedZoom),\n          left: (_x - tileMinX) * 256,\n          top: (_y - tileMinY) * 256,\n          width: 256,\n          height: 256,\n          active: true\n        });\n      }\n    }\n\n    var boxStyle = {\n      width: scaleWidth,\n      height: scaleHeight,\n      position: 'absolute',\n      top: \"calc((100% - \" + height + \"px) / 2)\",\n      left: \"calc((100% - \" + width + \"px) / 2)\",\n      overflow: 'hidden',\n      willChange: 'transform',\n      transform: \"scale(\" + scale + \", \" + scale + \")\",\n      transformOrigin: 'top left'\n    };\n    var boxClassname = this.props.boxClassname || 'pigeon-tiles-box';\n    var left = -((tileCenterX - tileMinX) * 256 - scaleWidth / 2);\n    var top = -((tileCenterY - tileMinY) * 256 - scaleHeight / 2);\n    var tilesStyle = {\n      position: 'absolute',\n      width: (tileMaxX - tileMinX + 1) * 256,\n      height: (tileMaxY - tileMinY + 1) * 256,\n      willChange: 'transform',\n      transform: \"translate(\" + left + \"px, \" + top + \"px)\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: boxStyle,\n      className: boxClassname\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pigeon-tiles\",\n      style: tilesStyle\n    }, tiles.map(function (tile) {\n      return /*#__PURE__*/React.createElement(\"img\", {\n        key: tile.key,\n        src: tile.url,\n        srcSet: tile.srcSet,\n        width: tile.width,\n        height: tile.height,\n        loading: 'lazy',\n        onLoad: function onLoad() {\n          return _this3.imageLoaded(tile.key);\n        },\n        alt: '',\n        style: {\n          position: 'absolute',\n          left: tile.left,\n          top: tile.top,\n          willChange: 'transform',\n          transformOrigin: 'top left',\n          opacity: 1\n        }\n      });\n    })));\n  };\n\n  _proto.renderOverlays = function renderOverlays() {\n    var _this4 = this;\n\n    var _this$state12 = this.state,\n        width = _this$state12.width,\n        height = _this$state12.height,\n        center = _this$state12.center;\n    var mapState = {\n      bounds: this.getBounds(),\n      zoom: this.zoomPlusDelta(),\n      center: center,\n      width: width,\n      height: height\n    };\n    var childrenWithProps = React.Children.map(this.props.children, function (child) {\n      if (!child) {\n        return null;\n      }\n\n      if (! /*#__PURE__*/React.isValidElement(child)) {\n        return child;\n      }\n\n      var _child$props = child.props,\n          anchor = _child$props.anchor,\n          position = _child$props.position,\n          offset = _child$props.offset;\n\n      var c = _this4.latLngToPixel(anchor || position || center);\n\n      return /*#__PURE__*/React.cloneElement(child, {\n        left: c[0] - (offset ? offset[0] : 0),\n        top: c[1] - (offset ? offset[1] : 0),\n        latLngToPixel: _this4.latLngToPixel,\n        pixelToLatLng: _this4.pixelToLatLng,\n        setCenterZoom: _this4.setCenterZoomForChildren,\n        mapProps: _this4.props,\n        mapState: mapState\n      });\n    });\n    var childrenStyle = {\n      position: 'absolute',\n      width: width,\n      height: height,\n      top: \"calc((100% - \" + height + \"px) / 2)\",\n      left: \"calc((100% - \" + width + \"px) / 2)\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pigeon-overlays\",\n      style: childrenStyle\n    }, childrenWithProps);\n  };\n\n  _proto.renderAttribution = function renderAttribution() {\n    var _this$props4 = this.props,\n        attribution = _this$props4.attribution,\n        attributionPrefix = _this$props4.attributionPrefix;\n\n    if (attribution === false) {\n      return null;\n    }\n\n    var style = {\n      position: 'absolute',\n      bottom: 0,\n      right: 0,\n      fontSize: '11px',\n      padding: '2px 5px',\n      background: 'rgba(255, 255, 255, 0.7)',\n      fontFamily: \"'Helvetica Neue', Helvetica, Arial, sans-serif\",\n      color: '#333'\n    };\n    var linkStyle = {\n      color: '#0078A8',\n      textDecoration: 'none'\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: \"attr\",\n      className: \"pigeon-attribution\",\n      style: style\n    }, attributionPrefix === false ? null : /*#__PURE__*/React.createElement(\"span\", null, attributionPrefix || /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://pigeon-maps.js.org/\",\n      style: linkStyle,\n      target: \"_blank\",\n      rel: \"noreferrer noopener\"\n    }, \"Pigeon\"), ' | '), attribution || /*#__PURE__*/React.createElement(\"span\", null, ' © ', /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://www.openstreetmap.org/copyright\",\n      style: linkStyle,\n      target: \"_blank\",\n      rel: \"noreferrer noopener\"\n    }, \"OpenStreetMap\"), ' contributors'));\n  };\n\n  _proto.renderWarning = function renderWarning() {\n    var _this$props5 = this.props,\n        metaWheelZoom = _this$props5.metaWheelZoom,\n        metaWheelZoomWarning = _this$props5.metaWheelZoomWarning,\n        twoFingerDrag = _this$props5.twoFingerDrag,\n        twoFingerDragWarning = _this$props5.twoFingerDragWarning,\n        warningZIndex = _this$props5.warningZIndex;\n    var _this$state13 = this.state,\n        showWarning = _this$state13.showWarning,\n        warningType = _this$state13.warningType,\n        width = _this$state13.width,\n        height = _this$state13.height;\n\n    if (metaWheelZoom && metaWheelZoomWarning || twoFingerDrag && twoFingerDragWarning) {\n      var style = {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: width,\n        height: height,\n        overflow: 'hidden',\n        pointerEvents: 'none',\n        opacity: showWarning ? 100 : 0,\n        transition: 'opacity 300ms',\n        background: 'rgba(0,0,0,0.5)',\n        color: '#fff',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        fontSize: 22,\n        fontFamily: '\"Arial\", sans-serif',\n        textAlign: 'center',\n        zIndex: warningZIndex\n      };\n      var meta = typeof window !== 'undefined' && window.navigator && window.navigator.platform.toUpperCase().indexOf('MAC') >= 0 ? '⌘' : 'ctrl';\n      var warningText = warningType === 'fingers' ? twoFingerDragWarning : metaWheelZoomWarning;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pigeon-overlay-warning\",\n        style: style\n      }, warningText.replace('META', meta));\n    } else {\n      return null;\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props6 = this.props,\n        touchEvents = _this$props6.touchEvents,\n        twoFingerDrag = _this$props6.twoFingerDrag;\n    var _this$state14 = this.state,\n        width = _this$state14.width,\n        height = _this$state14.height;\n    var containerStyle = {\n      width: this.props.width ? width : '100%',\n      height: this.props.height ? height : '100%',\n      position: 'relative',\n      display: 'inline-block',\n      overflow: 'hidden',\n      background: '#dddddd',\n      touchAction: touchEvents ? twoFingerDrag ? 'pan-x pan-y' : 'none' : 'auto'\n    };\n    var hasSize = !!(width && height);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: containerStyle,\n      ref: this.setRef\n    }, hasSize && this.renderTiles(), hasSize && this.renderOverlays(), hasSize && this.renderAttribution(), hasSize && this.renderWarning());\n  };\n\n  return Map;\n}(Component);\n\nMap.defaultProps = {\n  animate: true,\n  metaWheelZoom: false,\n  metaWheelZoomWarning: 'Use META + wheel to zoom!',\n  twoFingerDrag: false,\n  twoFingerDragWarning: 'Use two fingers to move the map',\n  zoomSnap: true,\n  mouseEvents: true,\n  touchEvents: true,\n  warningZIndex: 100,\n  animateMaxScreens: 5,\n  minZoom: 1,\n  maxZoom: 18,\n  limitBounds: 'center',\n  dprs: []\n};\n\nfunction Marker(props) {\n  var width = typeof props.width !== 'undefined' ? props.width : typeof props.height !== 'undefined' ? props.height * 29 / 34 : 29;\n  var height = typeof props.height !== 'undefined' ? props.height : typeof props.width !== 'undefined' ? props.width * 34 / 29 : 34;\n\n  var _useState = useState(props.hover || false),\n      internalHover = _useState[0],\n      setInternalHover = _useState[1];\n\n  var hover = typeof props.hover === 'undefined' ? internalHover : props.hover;\n  var color = props.color || '#93C0D0';\n\n  var eventParameters = function eventParameters(event) {\n    return {\n      event: event,\n      anchor: props.anchor,\n      payload: props.payload\n    };\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2({\n      position: 'absolute',\n      transform: \"translate(\" + (props.left - width / 2) + \"px, \" + (props.top - (height - 1)) + \"px)\",\n      filter: hover ? 'drop-shadow(0 0 4px rgba(0, 0, 0, .3))' : '',\n      pointerEvents: 'none',\n      cursor: 'pointer'\n    }, props.style || {}),\n    className: props.className ? props.className + \" pigeon-click-block\" : 'pigeon-click-block'\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    viewBox: \"0 0 61 71\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    style: {\n      pointerEvents: 'auto'\n    },\n    onClick: props.onClick ? function (event) {\n      return props.onClick(eventParameters(event));\n    } : null,\n    onContextMenu: props.onContextMenu ? function (event) {\n      return props.onContextMenu(eventParameters(event));\n    } : null,\n    onMouseOver: function onMouseOver(event) {\n      props.onMouseOver && props.onMouseOver(eventParameters(event));\n      setInternalHover(true);\n    },\n    onMouseOut: function onMouseOut(event) {\n      props.onMouseOut && props.onMouseOut(eventParameters(event));\n      setInternalHover(false);\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M52 31.5C52 36.8395 49.18 42.314 45.0107 47.6094C40.8672 52.872 35.619 57.678 31.1763 61.6922C30.7916 62.0398 30.2084 62.0398 29.8237 61.6922C25.381 57.678 20.1328 52.872 15.9893 47.6094C11.82 42.314 9 36.8395 9 31.5C9 18.5709 18.6801 9 30.5 9C42.3199 9 52 18.5709 52 31.5Z\",\n    fill: color,\n    stroke: \"white\",\n    strokeWidth: \"4\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"30.5\",\n    cy: \"30.5\",\n    r: \"8.5\",\n    fill: \"white\",\n    opacity: hover ? 0.98 : 0.6\n  }))));\n}\n\nfunction Overlay(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2({\n      position: 'absolute',\n      transform: \"translate(\" + props.left + \"px, \" + props.top + \"px)\"\n    }, props.style || {}),\n    className: props.className ? props.className + \" pigeon-click-block\" : 'pigeon-click-block'\n  }, props.children);\n}\n\nfunction isDescendentOf(element, ancestor) {\n  while (element) {\n    if (element === ancestor) {\n      return true;\n    }\n\n    element = element.parentElement;\n  }\n\n  return false;\n}\n\nvar defaultState = {\n  isDragging: false,\n  startX: undefined,\n  startY: undefined,\n  startLeft: undefined,\n  startTop: undefined,\n  deltaX: 0,\n  deltaY: 0\n};\n\nfunction Draggable(props) {\n  var dragRef = useRef();\n  var propsRef = useRef(props);\n  var stateRef = useRef(_objectSpread2({}, defaultState));\n\n  var _useState = useState(defaultState),\n      _state = _useState[0],\n      _setState = _useState[1];\n\n  propsRef.current = props;\n\n  var setState = function setState(stateUpdate) {\n    var newState = _objectSpread2(_objectSpread2({}, stateRef.current), stateUpdate);\n\n    stateRef.current = newState;\n\n    _setState(newState);\n  };\n\n  var _props$mapProps = props.mapProps,\n      mouseEvents = _props$mapProps.mouseEvents,\n      touchEvents = _props$mapProps.touchEvents;\n  useEffect(function () {\n    var handleDragStart = function handleDragStart(event) {\n      if (isDescendentOf(event.target, dragRef.current)) {\n        event.preventDefault();\n        setState({\n          isDragging: true,\n          startX: ('touches' in event ? event.touches[0] : event).clientX,\n          startY: ('touches' in event ? event.touches[0] : event).clientY,\n          startLeft: propsRef.current.left,\n          startTop: propsRef.current.top,\n          deltaX: 0,\n          deltaY: 0\n        });\n\n        if (propsRef.current.onDragStart) {\n          var _propsRef$current = propsRef.current,\n              _left = _propsRef$current.left,\n              _top = _propsRef$current.top,\n              offset = _propsRef$current.offset,\n              pixelToLatLng = _propsRef$current.pixelToLatLng;\n          propsRef.current.onDragMove(pixelToLatLng([_left + (offset ? offset[0] : 0), _top + (offset ? offset[1] : 0)]));\n        }\n      }\n    };\n\n    var handleDragMove = function handleDragMove(event) {\n      if (!stateRef.current.isDragging) {\n        return;\n      }\n\n      event.preventDefault();\n      var x = ('touches' in event ? event.touches[0] : event).clientX;\n      var y = ('touches' in event ? event.touches[0] : event).clientY;\n      var deltaX = x - stateRef.current.startX;\n      var deltaY = y - stateRef.current.startY;\n      setState({\n        deltaX: deltaX,\n        deltaY: deltaY\n      });\n\n      if (propsRef.current.onDragMove) {\n        var _propsRef$current2 = propsRef.current,\n            offset = _propsRef$current2.offset,\n            pixelToLatLng = _propsRef$current2.pixelToLatLng;\n        var _stateRef$current = stateRef.current,\n            _startLeft = _stateRef$current.startLeft,\n            _startTop = _stateRef$current.startTop;\n        propsRef.current.onDragMove(pixelToLatLng([_startLeft + deltaX + (offset ? offset[0] : 0), _startTop + deltaY + (offset ? offset[1] : 0)]));\n      }\n    };\n\n    var handleDragEnd = function handleDragEnd(event) {\n      var _propsRef$current$onD, _propsRef$current4;\n\n      if (!stateRef.current.isDragging) {\n        return;\n      }\n\n      event.preventDefault();\n      var _propsRef$current3 = propsRef.current,\n          offset = _propsRef$current3.offset,\n          pixelToLatLng = _propsRef$current3.pixelToLatLng;\n      var _stateRef$current2 = stateRef.current,\n          deltaX = _stateRef$current2.deltaX,\n          deltaY = _stateRef$current2.deltaY,\n          startLeft = _stateRef$current2.startLeft,\n          startTop = _stateRef$current2.startTop;\n      (_propsRef$current$onD = (_propsRef$current4 = propsRef.current).onDragEnd) === null || _propsRef$current$onD === void 0 ? void 0 : _propsRef$current$onD.call(_propsRef$current4, pixelToLatLng([startLeft + deltaX + (offset ? offset[0] : 0), startTop + deltaY + (offset ? offset[1] : 0)]));\n      setState({\n        isDragging: false,\n        startX: undefined,\n        startY: undefined,\n        startLeft: undefined,\n        startTop: undefined,\n        deltaX: 0,\n        deltaY: 0\n      });\n    };\n\n    var wa = function wa(e, t, o) {\n      return window.addEventListener(e, t, o);\n    };\n\n    var wr = function wr(e, t) {\n      return window.removeEventListener(e, t);\n    };\n\n    if (mouseEvents) {\n      wa('mousedown', handleDragStart);\n      wa('mousemove', handleDragMove);\n      wa('mouseup', handleDragEnd);\n    }\n\n    if (touchEvents) {\n      wa('touchstart', handleDragStart, {\n        passive: false\n      });\n      wa('touchmove', handleDragMove, {\n        passive: false\n      });\n      wa('touchend', handleDragEnd, {\n        passive: false\n      });\n    }\n\n    return function () {\n      if (mouseEvents) {\n        wr('mousedown', handleDragStart);\n        wr('mousemove', handleDragMove);\n        wr('mouseup', handleDragEnd);\n      }\n\n      if (touchEvents) {\n        wr('touchstart', handleDragStart);\n        wr('touchmove', handleDragMove);\n        wr('touchend', handleDragEnd);\n      }\n    };\n  }, [mouseEvents, touchEvents]);\n  var left = props.left,\n      top = props.top,\n      className = props.className,\n      style = props.style;\n  var deltaX = _state.deltaX,\n      deltaY = _state.deltaY,\n      startLeft = _state.startLeft,\n      startTop = _state.startTop,\n      isDragging = _state.isDragging;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2(_objectSpread2({\n      cursor: isDragging ? 'grabbing' : 'grab'\n    }, style || {}), {}, {\n      position: 'absolute',\n      transform: \"translate(\" + (isDragging ? startLeft + deltaX : left) + \"px, \" + (isDragging ? startTop + deltaY : top) + \"px)\"\n    }),\n    ref: dragRef,\n    className: \"pigeon-drag-block\" + (className ? \" \" + className : '')\n  }, props.children);\n}\n\nvar commonStyle = {\n  position: 'absolute',\n  top: 10,\n  left: 10\n};\nvar commonButtonStyle = {\n  width: 28,\n  height: 28,\n  borderRadius: 2,\n  boxShadow: '0 1px 4px -1px rgba(0,0,0,.3)',\n  background: 'white',\n  lineHeight: '26px',\n  fontSize: '20px',\n  fontWeight: 700,\n  color: '#666',\n  marginBottom: 1,\n  cursor: 'pointer',\n  border: 'none',\n  display: 'block',\n  outline: 'none'\n};\n\nfunction ZoomControl(_ref) {\n  var style = _ref.style,\n      buttonStyle = _ref.buttonStyle,\n      setCenterZoom = _ref.setCenterZoom,\n      mapState = _ref.mapState,\n      mapProps = _ref.mapProps;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pigeon-zoom-buttons pigeon-drag-block\",\n    style: style ? _objectSpread2(_objectSpread2({}, commonStyle), style) : commonStyle\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"pigeon-zoom-in\",\n    style: buttonStyle ? _objectSpread2(_objectSpread2({}, commonButtonStyle), buttonStyle) : commonButtonStyle,\n    onClick: function onClick() {\n      return setCenterZoom(mapState.center, Math.min(mapState.zoom + 1, mapProps.maxZoom));\n    }\n  }, \"+\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"pigeon-zoom-out\",\n    style: buttonStyle ? _objectSpread2(_objectSpread2({}, commonButtonStyle), buttonStyle) : commonButtonStyle,\n    onClick: function onClick() {\n      return setCenterZoom(mapState.center, Math.max(mapState.zoom - 1, mapProps.minZoom));\n    }\n  }, \"\\u2013\"));\n}\n\nexport { Draggable, Map, Marker, Overlay, ZoomControl };","map":{"version":3,"sources":["/home/dylan/my-app/node_modules/pigeon-maps/lib/index.esm.js"],"names":["React","Component","useState","useRef","useEffect","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","_inheritsLoose","subClass","superClass","prototype","create","constructor","__proto__","debounce","func","wait","timeout","_len","args","Array","_key","context","clearTimeout","setTimeout","parentHasClass","element","className","classList","contains","parentElement","parentPosition","rect","getBoundingClientRect","x","left","y","top","osm","z","s","String","fromCharCode","ANIMATION_TIME","DIAGONAL_THROW_TIME","SCROLL_PIXELS_FOR_ZOOM_LEVEL","MIN_DRAG_FOR_THROW","CLICK_TOLERANCE","DOUBLE_CLICK_DELAY","DEBOUNCE_DELAY","PINCH_RELEASE_THROW_DELAY","WARNING_DISPLAY_TIMEOUT","NOOP","lng2tile","lon","zoom","Math","pow","lat2tile","lat","log","tan","PI","cos","tile2lng","tile2lat","n","atan","exp","getMousePixel","dom","event","parent","clientX","clientY","easeOutQuad","t","absoluteMinMax","hasWindow","window","performanceNow","performance","now","timeStart","Date","getTime","requestAnimationFrame","callback","cancelAnimationFrame","animFrame","srcSet","dprs","url","map","dpr","join","Map","_Component","props","_ref","_props$defaultZoom","_ref2","_props$defaultCenter","_ref3","_props$width","_ref4","_props$height","_this","call","_dragStart","_mouseDown","_moveEvents","_lastClick","_lastTap","_lastWheel","_touchStartPixel","_touchStartMidPoint","_touchStartDistance","_secondTouchEnd","_warningClearTimeout","_isAnimating","_animationStart","_animationEnd","_zoomStart","_centerTarget","_zoomTarget","_zoomAround","_animFrame","_boundsSynced","_minMaxCache","_resizeObserver","updateWidthHeight","_containerRef","width","height","setState","wa","_window","addEventListener","wr","_window2","removeEventListener","bindMouseEvents","handleMouseDown","handleMouseUp","handleMouseMove","bindTouchEvents","handleTouchStart","passive","handleTouchMove","handleTouchEnd","unbindMouseEvents","unbindTouchEvents","bindResizeEvent","unbindResizeEvent","bindWheelEvent","handleWheel","unbindWheelEvent","setCenterZoomTarget","center","fromProps","zoomAround","animationDuration","animate","distanceInScreens","state","animateMaxScreens","_this$animationStep","animationStep","centerStep","zoomStep","_centerStart","limitCenterAtZoom","_lastCenter","_lastZoom","onAnimationStart","calculateZoomCenter","stopAnimating","_center","setCenterZoom","setCenterZoomForChildren","centerTarget","zoomTarget","_this$state","l1","latLngToPixel","l2","z1","z2","w","abs","h","sqrt","timestamp","progress","max","percentage","zoomDiff","_centerStep","onAnimationStop","_this$animationStep2","minMax","getBoundsMinMax","min","isNaN","animationEnded","limitedCenter","round","tileValues","nextValues","oldTiles","o","roundedZoom","concat","loadTracker","tileMinX","tileMaxX","tileMinY","tileMaxY","_loadTracker","maybeZoom","maybeCenter","syncToProps","limitBounds","_this$state2","pixelsAtZoom","minLng","minLat","maxLng","maxLat","imageLoaded","unloadedCount","values","v","touches","touch","pixel","coordsInside","twoFingerDrag","preventDefault","latLngNow","pixelToLatLng","minZoom","maxZoom","trackMoveEvents","stopTrackingMoveEvents","pixelDelta","zoomDelta","sendDeltaChange","t1","t2","showWarning","_this$state3","midPoint","midPointDiff","distance","log2","scale","centerDiffDiff","_this$props","zoomSnap","_this$sendDeltaChange","clearWarning","oldTouchPixel","newTouchPixel","changedTouches","throwAfterMoving","latLng","ceil","floor","_zoom","button","_mousePosition","onClick","undefined","_this$sendDeltaChange2","coords","shift","_this$state4","lastEvent","deltaMs","delta","diagonal","throwTime","lng","_this$state5","getBounds","zoomPlusDelta","_this$state6","ne","sw","onBoundsChanged","bounds","initial","_this$props2","mouseEvents","metaWheelZoom","metaKey","ctrlKey","addToZoom","deltaY","stillToAdd","zoomAroundMouse","warningType","_this$props3","_this$state7","pointDiff","tileX","tileY","_this$state8","tileCenterX","tileCenterY","oldZoom","newZoom","_this$state9","pixelBefore","pixelAfter","newCenter","setRef","defaultZoom","defaultCenter","defaultWidth","defaultHeight","_proto","componentDidMount","_this2","touchEvents","ResizeObserver","observe","componentWillUnmount","disconnect","componentDidUpdate","prevProps","_prevProps$center","currentCenter","currentZoom","_this$props$center","_this$props$zoom","nextCenter","nextZoom","_this$state10","pos","document","elementFromPoint","_ref5","scaleWidth","scaleHeight","halfWidth","halfHeight","renderTiles","_this3","_this$state11","mapUrl","provider","_this$tileValues","tiles","old","xDiff","yDiff","_xMin","_yMin","_xMax","_yMax","active","xMin","yMin","xMax","yMax","_x","_y","boxStyle","position","overflow","willChange","transform","transformOrigin","boxClassname","tilesStyle","createElement","style","tile","src","loading","onLoad","alt","opacity","renderOverlays","_this4","_this$state12","mapState","childrenWithProps","Children","children","child","isValidElement","_child$props","anchor","offset","c","cloneElement","mapProps","childrenStyle","renderAttribution","_this$props4","attribution","attributionPrefix","bottom","right","fontSize","padding","background","fontFamily","color","linkStyle","textDecoration","href","rel","renderWarning","_this$props5","metaWheelZoomWarning","twoFingerDragWarning","warningZIndex","_this$state13","pointerEvents","transition","display","justifyContent","alignItems","textAlign","zIndex","meta","navigator","platform","toUpperCase","indexOf","warningText","replace","render","_this$props6","_this$state14","containerStyle","touchAction","hasSize","ref","defaultProps","Marker","_useState","hover","internalHover","setInternalHover","eventParameters","payload","cursor","viewBox","fill","xmlns","onContextMenu","onMouseOver","onMouseOut","d","stroke","strokeWidth","cx","cy","r","Overlay","isDescendentOf","ancestor","defaultState","isDragging","startX","startY","startLeft","startTop","deltaX","Draggable","dragRef","propsRef","stateRef","_state","_setState","current","stateUpdate","newState","_props$mapProps","handleDragStart","onDragStart","_propsRef$current","_left","_top","onDragMove","handleDragMove","_propsRef$current2","_stateRef$current","_startLeft","_startTop","handleDragEnd","_propsRef$current$onD","_propsRef$current4","_propsRef$current3","_stateRef$current2","onDragEnd","e","commonStyle","commonButtonStyle","borderRadius","boxShadow","lineHeight","fontWeight","marginBottom","border","outline","ZoomControl","buttonStyle"],"mappings":"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","sourcesContent":["import React, { Component, useState, useRef, useEffect } from 'react';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction debounce(func, wait) {\n  var timeout;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      return func.apply(context, args);\n    }, wait);\n  };\n}\nfunction parentHasClass(element, className) {\n  while (element) {\n    if (element.classList && element.classList.contains(className)) {\n      return true;\n    }\n\n    element = element.parentElement;\n  }\n\n  return false;\n}\nfunction parentPosition(element) {\n  var rect = element.getBoundingClientRect();\n  return {\n    x: rect.left,\n    y: rect.top\n  };\n}\n\nfunction osm(x, y, z) {\n  var s = String.fromCharCode(97 + (x + y + z) % 3);\n  return \"https://\" + s + \".tile.openstreetmap.org/\" + z + \"/\" + x + \"/\" + y + \".png\";\n}\n\nvar ANIMATION_TIME = 300;\nvar DIAGONAL_THROW_TIME = 1500;\nvar SCROLL_PIXELS_FOR_ZOOM_LEVEL = 150;\nvar MIN_DRAG_FOR_THROW = 40;\nvar CLICK_TOLERANCE = 2;\nvar DOUBLE_CLICK_DELAY = 300;\nvar DEBOUNCE_DELAY = 60;\nvar PINCH_RELEASE_THROW_DELAY = 300;\nvar WARNING_DISPLAY_TIMEOUT = 300;\n\nvar NOOP = function NOOP() {\n  return true;\n};\n\nvar lng2tile = function lng2tile(lon, zoom) {\n  return (lon + 180) / 360 * Math.pow(2, zoom);\n};\n\nvar lat2tile = function lat2tile(lat, zoom) {\n  return (1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180)) / Math.PI) / 2 * Math.pow(2, zoom);\n};\n\nfunction tile2lng(x, z) {\n  return x / Math.pow(2, z) * 360 - 180;\n}\n\nfunction tile2lat(y, z) {\n  var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n  return 180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n}\n\nfunction getMousePixel(dom, event) {\n  var parent = parentPosition(dom);\n  return [event.clientX - parent.x, event.clientY - parent.y];\n}\n\nfunction easeOutQuad(t) {\n  return t * (2 - t);\n}\n\nvar absoluteMinMax = [tile2lat(Math.pow(2, 10), 10), tile2lat(0, 10), tile2lng(0, 10), tile2lng(Math.pow(2, 10), 10)];\nvar hasWindow = typeof window !== 'undefined';\nvar performanceNow = hasWindow && window.performance && window.performance.now ? function () {\n  return window.performance.now();\n} : function () {\n  var timeStart = new Date().getTime();\n  return function () {\n    return new Date().getTime() - timeStart;\n  };\n}();\n\nvar requestAnimationFrame = function requestAnimationFrame(callback) {\n  if (hasWindow) {\n    return (window.requestAnimationFrame || window.setTimeout)(callback);\n  } else {\n    callback(new Date().getTime());\n    return null;\n  }\n};\n\nvar cancelAnimationFrame = function cancelAnimationFrame(animFrame) {\n  return hasWindow && animFrame ? (window.cancelAnimationFrame || window.clearTimeout)(animFrame) : false;\n};\n\nfunction srcSet(dprs, url, x, y, z) {\n  if (!dprs || dprs.length === 0) {\n    return '';\n  }\n\n  return dprs.map(function (dpr) {\n    return url(x, y, z, dpr) + (dpr === 1 ? '' : \" \" + dpr + \"x\");\n  }).join(', ');\n}\n\nvar Map = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Map, _Component);\n\n  function Map(props) {\n    var _ref, _props$defaultZoom, _ref2, _props$defaultCenter, _ref3, _props$width, _ref4, _props$height;\n\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n    _this._dragStart = null;\n    _this._mouseDown = false;\n    _this._moveEvents = [];\n    _this._lastClick = null;\n    _this._lastTap = null;\n    _this._lastWheel = null;\n    _this._touchStartPixel = null;\n    _this._touchStartMidPoint = null;\n    _this._touchStartDistance = null;\n    _this._secondTouchEnd = null;\n    _this._warningClearTimeout = null;\n    _this._isAnimating = false;\n    _this._animationStart = null;\n    _this._animationEnd = null;\n    _this._zoomStart = null;\n    _this._centerTarget = null;\n    _this._zoomTarget = null;\n    _this._zoomAround = null;\n    _this._animFrame = null;\n    _this._boundsSynced = false;\n    _this._minMaxCache = null;\n    _this._resizeObserver = null;\n\n    _this.updateWidthHeight = function () {\n      if (_this._containerRef) {\n        var rect = _this._containerRef.getBoundingClientRect();\n\n        if (rect && rect.width > 0 && rect.height > 0) {\n          _this.setState({\n            width: rect.width,\n            height: rect.height\n          });\n\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    _this.wa = function () {\n      var _window;\n\n      return (_window = window).addEventListener.apply(_window, arguments);\n    };\n\n    _this.wr = function () {\n      var _window2;\n\n      return (_window2 = window).removeEventListener.apply(_window2, arguments);\n    };\n\n    _this.bindMouseEvents = function () {\n      _this.wa('mousedown', _this.handleMouseDown);\n\n      _this.wa('mouseup', _this.handleMouseUp);\n\n      _this.wa('mousemove', _this.handleMouseMove);\n    };\n\n    _this.bindTouchEvents = function () {\n      _this.wa('touchstart', _this.handleTouchStart, {\n        passive: false\n      });\n\n      _this.wa('touchmove', _this.handleTouchMove, {\n        passive: false\n      });\n\n      _this.wa('touchend', _this.handleTouchEnd, {\n        passive: false\n      });\n    };\n\n    _this.unbindMouseEvents = function () {\n      _this.wr('mousedown', _this.handleMouseDown);\n\n      _this.wr('mouseup', _this.handleMouseUp);\n\n      _this.wr('mousemove', _this.handleMouseMove);\n    };\n\n    _this.unbindTouchEvents = function () {\n      _this.wr('touchstart', _this.handleTouchStart);\n\n      _this.wr('touchmove', _this.handleTouchMove);\n\n      _this.wr('touchend', _this.handleTouchEnd);\n    };\n\n    _this.bindResizeEvent = function () {\n      _this.wa('resize', _this.updateWidthHeight);\n    };\n\n    _this.unbindResizeEvent = function () {\n      _this.wr('resize', _this.updateWidthHeight);\n    };\n\n    _this.bindWheelEvent = function () {\n      if (_this._containerRef) {\n        _this._containerRef.addEventListener('wheel', _this.handleWheel, {\n          passive: false\n        });\n      }\n    };\n\n    _this.unbindWheelEvent = function () {\n      if (_this._containerRef) {\n        _this._containerRef.removeEventListener('wheel', _this.handleWheel);\n      }\n    };\n\n    _this.setCenterZoomTarget = function (center, zoom, fromProps, zoomAround, animationDuration) {\n      if (fromProps === void 0) {\n        fromProps = false;\n      }\n\n      if (zoomAround === void 0) {\n        zoomAround = null;\n      }\n\n      if (animationDuration === void 0) {\n        animationDuration = ANIMATION_TIME;\n      }\n\n      if (_this.props.animate && (!fromProps || _this.distanceInScreens(center, zoom, _this.state.center, _this.state.zoom) <= _this.props.animateMaxScreens)) {\n        if (_this._isAnimating) {\n          cancelAnimationFrame(_this._animFrame);\n\n          var _this$animationStep = _this.animationStep(performanceNow()),\n              centerStep = _this$animationStep.centerStep,\n              zoomStep = _this$animationStep.zoomStep;\n\n          _this._centerStart = centerStep;\n          _this._zoomStart = zoomStep;\n        } else {\n          _this._isAnimating = true;\n          _this._centerStart = _this.limitCenterAtZoom([_this._lastCenter[0], _this._lastCenter[1]], _this._lastZoom);\n          _this._zoomStart = _this._lastZoom;\n\n          _this.onAnimationStart();\n        }\n\n        _this._animationStart = performanceNow();\n        _this._animationEnd = _this._animationStart + animationDuration;\n\n        if (zoomAround) {\n          _this._zoomAround = zoomAround;\n          _this._centerTarget = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n        } else {\n          _this._zoomAround = null;\n          _this._centerTarget = center;\n        }\n\n        _this._zoomTarget = zoom;\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      } else {\n        _this.stopAnimating();\n\n        if (zoomAround) {\n          var _center = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n\n          _this.setCenterZoom(_center, zoom, fromProps);\n        } else {\n          _this.setCenterZoom(center || _this.state.center, zoom, fromProps);\n        }\n      }\n    };\n\n    _this.setCenterZoomForChildren = function (center, zoom) {\n      _this.setCenterZoomTarget(center || _this.state.center, zoom || _this.state.zoom, true);\n    };\n\n    _this.distanceInScreens = function (centerTarget, zoomTarget, center, zoom) {\n      var _this$state = _this.state,\n          width = _this$state.width,\n          height = _this$state.height;\n\n      var l1 = _this.latLngToPixel(center, center, zoom);\n\n      var l2 = _this.latLngToPixel(centerTarget, center, zoom);\n\n      var z1 = _this.latLngToPixel(center, center, zoomTarget);\n\n      var z2 = _this.latLngToPixel(centerTarget, center, zoomTarget);\n\n      var w = (Math.abs(l1[0] - l2[0]) + Math.abs(z1[0] - z2[0])) / 2 / width;\n      var h = (Math.abs(l1[1] - l2[1]) + Math.abs(z1[1] - z2[1])) / 2 / height;\n      return Math.sqrt(w * w + h * h);\n    };\n\n    _this.animationStep = function (timestamp) {\n      if (!_this._animationEnd || !_this._animationStart || !_this._zoomTarget || !_this._zoomStart || !_this._centerStart || !_this._centerTarget) {\n        return {\n          centerStep: _this.state.center,\n          zoomStep: _this.state.zoom\n        };\n      }\n\n      var length = _this._animationEnd - _this._animationStart;\n      var progress = Math.max(timestamp - _this._animationStart, 0);\n      var percentage = easeOutQuad(progress / length);\n      var zoomDiff = (_this._zoomTarget - _this._zoomStart) * percentage;\n      var zoomStep = _this._zoomStart + zoomDiff;\n\n      if (_this._zoomAround) {\n        var centerStep = _this.calculateZoomCenter(_this._centerStart, _this._zoomAround, _this._zoomStart, zoomStep);\n\n        return {\n          centerStep: centerStep,\n          zoomStep: zoomStep\n        };\n      } else {\n        var _centerStep = [_this._centerStart[0] + (_this._centerTarget[0] - _this._centerStart[0]) * percentage, _this._centerStart[1] + (_this._centerTarget[1] - _this._centerStart[1]) * percentage];\n        return {\n          centerStep: _centerStep,\n          zoomStep: zoomStep\n        };\n      }\n    };\n\n    _this.animate = function (timestamp) {\n      if (!_this._animationEnd || timestamp >= _this._animationEnd) {\n        _this._isAnimating = false;\n\n        _this.setCenterZoom(_this._centerTarget, _this._zoomTarget, true);\n\n        _this.onAnimationStop();\n      } else {\n        var _this$animationStep2 = _this.animationStep(timestamp),\n            centerStep = _this$animationStep2.centerStep,\n            zoomStep = _this$animationStep2.zoomStep;\n\n        _this.setCenterZoom(centerStep, zoomStep);\n\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      }\n    };\n\n    _this.stopAnimating = function () {\n      if (_this._isAnimating) {\n        _this._isAnimating = false;\n\n        _this.onAnimationStop();\n\n        cancelAnimationFrame(_this._animFrame);\n      }\n    };\n\n    _this.limitCenterAtZoom = function (center, zoom) {\n      var minMax = _this.getBoundsMinMax(zoom || _this.state.zoom);\n\n      return [Math.max(Math.min(!center || isNaN(center[0]) ? _this.state.center[0] : center[0], minMax[1]), minMax[0]), Math.max(Math.min(!center || isNaN(center[1]) ? _this.state.center[1] : center[1], minMax[3]), minMax[2])];\n    };\n\n    _this.onAnimationStart = function () {\n      _this.props.onAnimationStart && _this.props.onAnimationStart();\n    };\n\n    _this.onAnimationStop = function () {\n      _this.props.onAnimationStop && _this.props.onAnimationStop();\n    };\n\n    _this.setCenterZoom = function (center, zoom, animationEnded) {\n      if (animationEnded === void 0) {\n        animationEnded = false;\n      }\n\n      var limitedCenter = _this.limitCenterAtZoom(center, zoom);\n\n      if (zoom && Math.round(_this.state.zoom) !== Math.round(zoom)) {\n        var tileValues = _this.tileValues(_this.state);\n\n        var nextValues = _this.tileValues({\n          center: limitedCenter,\n          zoom: zoom,\n          width: _this.state.width,\n          height: _this.state.height\n        });\n\n        var oldTiles = _this.state.oldTiles;\n\n        _this.setState({\n          oldTiles: oldTiles.filter(function (o) {\n            return o.roundedZoom !== tileValues.roundedZoom;\n          }).concat(tileValues)\n        }, NOOP);\n\n        var loadTracker = {};\n\n        for (var x = nextValues.tileMinX; x <= nextValues.tileMaxX; x++) {\n          for (var y = nextValues.tileMinY; y <= nextValues.tileMaxY; y++) {\n            var key = x + \"-\" + y + \"-\" + nextValues.roundedZoom;\n            loadTracker[key] = false;\n          }\n        }\n\n        _this._loadTracker = loadTracker;\n      }\n\n      _this.setState({\n        center: limitedCenter,\n        zoom: zoom || _this.state.zoom\n      }, NOOP);\n\n      var maybeZoom = _this.props.zoom ? _this.props.zoom : _this._lastZoom;\n      var maybeCenter = _this.props.center ? _this.props.center : _this._lastCenter;\n\n      if (zoom && (animationEnded || Math.abs(maybeZoom - zoom) > 0.001 || Math.abs(maybeCenter[0] - limitedCenter[0]) > 0.00001 || Math.abs(maybeCenter[1] - limitedCenter[1]) > 0.00001)) {\n        _this._lastZoom = zoom;\n        _this._lastCenter = [].concat(limitedCenter);\n\n        _this.syncToProps(limitedCenter, zoom);\n      }\n    };\n\n    _this.getBoundsMinMax = function (zoom) {\n      if (_this.props.limitBounds === 'center') {\n        return absoluteMinMax;\n      }\n\n      var _this$state2 = _this.state,\n          width = _this$state2.width,\n          height = _this$state2.height;\n\n      if (_this._minMaxCache && _this._minMaxCache[0] === zoom && _this._minMaxCache[1] === width && _this._minMaxCache[2] === height) {\n        return _this._minMaxCache[3];\n      }\n\n      var pixelsAtZoom = Math.pow(2, zoom) * 256;\n      var minLng = width > pixelsAtZoom ? 0 : tile2lng(width / 512, zoom);\n      var minLat = height > pixelsAtZoom ? 0 : tile2lat(Math.pow(2, zoom) - height / 512, zoom);\n      var maxLng = width > pixelsAtZoom ? 0 : tile2lng(Math.pow(2, zoom) - width / 512, zoom);\n      var maxLat = height > pixelsAtZoom ? 0 : tile2lat(height / 512, zoom);\n      var minMax = [minLat, maxLat, minLng, maxLng];\n      _this._minMaxCache = [zoom, width, height, minMax];\n      return minMax;\n    };\n\n    _this.imageLoaded = function (key) {\n      if (_this._loadTracker && key in _this._loadTracker) {\n        _this._loadTracker[key] = true;\n        var unloadedCount = Object.values(_this._loadTracker).filter(function (v) {\n          return !v;\n        }).length;\n\n        if (unloadedCount === 0) {\n          _this.setState({\n            oldTiles: []\n          }, NOOP);\n        }\n      }\n    };\n\n    _this.handleTouchStart = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      if (event.target && parentHasClass(event.target, 'pigeon-drag-block')) {\n        return;\n      }\n\n      if (event.touches.length === 1) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.coordsInside(pixel)) {\n          _this._touchStartPixel = [pixel];\n\n          if (!_this.props.twoFingerDrag) {\n            _this.stopAnimating();\n\n            if (_this._lastTap && performanceNow() - _this._lastTap < DOUBLE_CLICK_DELAY) {\n              event.preventDefault();\n\n              var latLngNow = _this.pixelToLatLng(_this._touchStartPixel[0]);\n\n              _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n            } else {\n              _this._lastTap = performanceNow();\n\n              _this.trackMoveEvents(pixel);\n            }\n          }\n        }\n      } else if (event.touches.length === 2 && _this._touchStartPixel) {\n        event.preventDefault();\n\n        _this.stopTrackingMoveEvents();\n\n        if (_this.state.pixelDelta || _this.state.zoomDelta) {\n          _this.sendDeltaChange();\n        }\n\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n        _this._touchStartPixel = [t1, t2];\n        _this._touchStartMidPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        _this._touchStartDistance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n      }\n    };\n\n    _this.handleTouchMove = function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n\n      if (event.touches.length === 1 && _this._touchStartPixel) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.props.twoFingerDrag) {\n          if (_this.coordsInside(pixel)) {\n            _this.showWarning('fingers');\n          }\n        } else {\n          event.preventDefault();\n\n          _this.trackMoveEvents(pixel);\n\n          _this.setState({\n            pixelDelta: [pixel[0] - _this._touchStartPixel[0][0], pixel[1] - _this._touchStartPixel[0][1]]\n          }, NOOP);\n        }\n      } else if (event.touches.length === 2 && _this._touchStartPixel && _this._touchStartMidPoint && _this._touchStartDistance) {\n        var _this$state3 = _this.state,\n            width = _this$state3.width,\n            height = _this$state3.height,\n            zoom = _this$state3.zoom;\n        event.preventDefault();\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n        var midPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        var midPointDiff = [midPoint[0] - _this._touchStartMidPoint[0], midPoint[1] - _this._touchStartMidPoint[1]];\n        var distance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n        var zoomDelta = Math.max(_this.props.minZoom, Math.min(_this.props.maxZoom, zoom + Math.log2(distance / _this._touchStartDistance))) - zoom;\n        var scale = Math.pow(2, zoomDelta);\n        var centerDiffDiff = [(width / 2 - midPoint[0]) * (scale - 1), (height / 2 - midPoint[1]) * (scale - 1)];\n\n        _this.setState({\n          zoomDelta: zoomDelta,\n          pixelDelta: [centerDiffDiff[0] + midPointDiff[0] * scale, centerDiffDiff[1] + midPointDiff[1] * scale]\n        }, NOOP);\n      }\n    };\n\n    _this.handleTouchEnd = function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n\n      if (_this._touchStartPixel) {\n        var _this$props = _this.props,\n            zoomSnap = _this$props.zoomSnap,\n            twoFingerDrag = _this$props.twoFingerDrag,\n            minZoom = _this$props.minZoom,\n            maxZoom = _this$props.maxZoom;\n        var zoomDelta = _this.state.zoomDelta;\n\n        var _this$sendDeltaChange = _this.sendDeltaChange(),\n            center = _this$sendDeltaChange.center,\n            zoom = _this$sendDeltaChange.zoom;\n\n        if (event.touches.length === 0) {\n          if (twoFingerDrag) {\n            _this.clearWarning();\n          } else {\n            var oldTouchPixel = _this._touchStartPixel[0];\n            var newTouchPixel = getMousePixel(_this._containerRef, event.changedTouches[0]);\n\n            if (Math.abs(oldTouchPixel[0] - newTouchPixel[0]) > CLICK_TOLERANCE || Math.abs(oldTouchPixel[1] - newTouchPixel[1]) > CLICK_TOLERANCE) {\n              if (!_this._secondTouchEnd || performanceNow() - _this._secondTouchEnd > PINCH_RELEASE_THROW_DELAY) {\n                event.preventDefault();\n\n                _this.throwAfterMoving(newTouchPixel, center, zoom);\n              }\n            }\n\n            _this._touchStartPixel = null;\n            _this._secondTouchEnd = null;\n          }\n        } else if (event.touches.length === 1) {\n          event.preventDefault();\n          var touch = getMousePixel(_this._containerRef, event.touches[0]);\n          _this._secondTouchEnd = performanceNow();\n          _this._touchStartPixel = [touch];\n\n          _this.trackMoveEvents(touch);\n\n          if (zoomSnap) {\n            var latLng = _this._touchStartMidPoint ? _this.pixelToLatLng(_this._touchStartMidPoint) : _this.state.center;\n            var zoomTarget;\n\n            if (twoFingerDrag && Math.round(_this.state.zoom) === Math.round(_this.state.zoom + zoomDelta)) {\n              zoomTarget = Math.round(_this.state.zoom);\n            } else {\n              zoomTarget = zoomDelta > 0 ? Math.ceil(_this.state.zoom) : Math.floor(_this.state.zoom);\n            }\n\n            var _zoom = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n            _this.setCenterZoomTarget(latLng, _zoom, false, latLng);\n          }\n        }\n      }\n    };\n\n    _this.handleMouseDown = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      var pixel = getMousePixel(_this._containerRef, event);\n\n      if (event.button === 0 && (!event.target || !parentHasClass(event.target, 'pigeon-drag-block')) && _this.coordsInside(pixel)) {\n        _this.stopAnimating();\n\n        event.preventDefault();\n\n        if (_this._lastClick && performanceNow() - _this._lastClick < DOUBLE_CLICK_DELAY) {\n          if (!parentHasClass(event.target, 'pigeon-click-block')) {\n            var latLngNow = _this.pixelToLatLng(_this._mousePosition || pixel);\n\n            _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n          }\n        } else {\n          _this._lastClick = performanceNow();\n          _this._mouseDown = true;\n          _this._dragStart = pixel;\n\n          _this.trackMoveEvents(pixel);\n        }\n      }\n    };\n\n    _this.handleMouseMove = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (_this._mouseDown && _this._dragStart) {\n        _this.trackMoveEvents(_this._mousePosition);\n\n        _this.setState({\n          pixelDelta: [_this._mousePosition[0] - _this._dragStart[0], _this._mousePosition[1] - _this._dragStart[1]]\n        }, NOOP);\n      }\n    };\n\n    _this.handleMouseUp = function (event) {\n      if (!_this._containerRef) {\n        _this._mouseDown = false;\n        return;\n      }\n\n      var pixelDelta = _this.state.pixelDelta;\n\n      if (_this._mouseDown) {\n        _this._mouseDown = false;\n        var pixel = getMousePixel(_this._containerRef, event);\n\n        if (_this.props.onClick && (!event.target || !parentHasClass(event.target, 'pigeon-click-block')) && (!pixelDelta || Math.abs(pixelDelta[0]) + Math.abs(pixelDelta[1]) <= CLICK_TOLERANCE)) {\n          var latLng = _this.pixelToLatLng(pixel);\n\n          _this.props.onClick({\n            event: event,\n            latLng: latLng,\n            pixel: pixel\n          });\n\n          _this.setState({\n            pixelDelta: undefined\n          }, NOOP);\n        } else {\n          var _this$sendDeltaChange2 = _this.sendDeltaChange(),\n              center = _this$sendDeltaChange2.center,\n              zoom = _this$sendDeltaChange2.zoom;\n\n          _this.throwAfterMoving(pixel, center, zoom);\n        }\n      }\n    };\n\n    _this.stopTrackingMoveEvents = function () {\n      _this._moveEvents = [];\n    };\n\n    _this.trackMoveEvents = function (coords) {\n      var timestamp = performanceNow();\n\n      if (_this._moveEvents.length === 0 || timestamp - _this._moveEvents[_this._moveEvents.length - 1].timestamp > 40) {\n        _this._moveEvents.push({\n          timestamp: timestamp,\n          coords: coords\n        });\n\n        if (_this._moveEvents.length > 2) {\n          _this._moveEvents.shift();\n        }\n      }\n    };\n\n    _this.throwAfterMoving = function (coords, center, zoom) {\n      var _this$state4 = _this.state,\n          width = _this$state4.width,\n          height = _this$state4.height;\n      var animate = _this.props.animate;\n      var timestamp = performanceNow();\n\n      var lastEvent = _this._moveEvents.shift();\n\n      if (lastEvent && animate) {\n        var deltaMs = Math.max(timestamp - lastEvent.timestamp, 1);\n        var delta = [(coords[0] - lastEvent.coords[0]) / deltaMs * 120, (coords[1] - lastEvent.coords[1]) / deltaMs * 120];\n        var distance = Math.sqrt(delta[0] * delta[0] + delta[1] * delta[1]);\n\n        if (distance > MIN_DRAG_FOR_THROW) {\n          var diagonal = Math.sqrt(width * width + height * height);\n          var throwTime = DIAGONAL_THROW_TIME * distance / diagonal;\n          var lng = tile2lng(lng2tile(center[1], zoom) - delta[0] / 256.0, zoom);\n          var lat = tile2lat(lat2tile(center[0], zoom) - delta[1] / 256.0, zoom);\n\n          _this.setCenterZoomTarget([lat, lng], zoom, false, null, throwTime);\n        }\n      }\n\n      _this.stopTrackingMoveEvents();\n    };\n\n    _this.sendDeltaChange = function () {\n      var _this$state5 = _this.state,\n          center = _this$state5.center,\n          zoom = _this$state5.zoom,\n          pixelDelta = _this$state5.pixelDelta,\n          zoomDelta = _this$state5.zoomDelta;\n      var lat = center[0];\n      var lng = center[1];\n\n      if (pixelDelta || zoomDelta !== 0) {\n        lng = tile2lng(lng2tile(center[1], zoom + zoomDelta) - (pixelDelta ? pixelDelta[0] / 256.0 : 0), zoom + zoomDelta);\n        lat = tile2lat(lat2tile(center[0], zoom + zoomDelta) - (pixelDelta ? pixelDelta[1] / 256.0 : 0), zoom + zoomDelta);\n\n        _this.setCenterZoom([lat, lng], zoom + zoomDelta);\n      }\n\n      _this.setState({\n        pixelDelta: undefined,\n        zoomDelta: 0\n      }, NOOP);\n\n      return {\n        center: _this.limitCenterAtZoom([lat, lng], zoom + zoomDelta),\n        zoom: zoom + zoomDelta\n      };\n    };\n\n    _this.getBounds = function (center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state6 = _this.state,\n          width = _this$state6.width,\n          height = _this$state6.height;\n      return {\n        ne: _this.pixelToLatLng([width - 1, 0], center, zoom),\n        sw: _this.pixelToLatLng([0, height - 1], center, zoom)\n      };\n    };\n\n    _this.syncToProps = function (center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.state.zoom;\n      }\n\n      var onBoundsChanged = _this.props.onBoundsChanged;\n\n      if (onBoundsChanged) {\n        var bounds = _this.getBounds(center, zoom);\n\n        onBoundsChanged({\n          center: center,\n          zoom: zoom,\n          bounds: bounds,\n          initial: !_this._boundsSynced\n        });\n        _this._boundsSynced = true;\n      }\n    };\n\n    _this.handleWheel = function (event) {\n      var _this$props2 = _this.props,\n          mouseEvents = _this$props2.mouseEvents,\n          metaWheelZoom = _this$props2.metaWheelZoom,\n          zoomSnap = _this$props2.zoomSnap,\n          animate = _this$props2.animate;\n\n      if (!mouseEvents) {\n        return;\n      }\n\n      if (!metaWheelZoom || event.metaKey || event.ctrlKey) {\n        event.preventDefault();\n        var addToZoom = -event.deltaY / SCROLL_PIXELS_FOR_ZOOM_LEVEL;\n\n        if (!zoomSnap && _this._zoomTarget) {\n          var stillToAdd = _this._zoomTarget - _this.state.zoom;\n\n          _this.zoomAroundMouse(addToZoom + stillToAdd, event);\n        } else {\n          if (animate) {\n            _this.zoomAroundMouse(addToZoom, event);\n          } else {\n            if (!_this._lastWheel || performanceNow() - _this._lastWheel > ANIMATION_TIME) {\n              _this._lastWheel = performanceNow();\n\n              _this.zoomAroundMouse(addToZoom, event);\n            }\n          }\n        }\n      } else {\n        _this.showWarning('wheel');\n      }\n    };\n\n    _this.showWarning = function (warningType) {\n      if (!_this.state.showWarning || _this.state.warningType !== warningType) {\n        _this.setState({\n          showWarning: true,\n          warningType: warningType\n        });\n      }\n\n      if (_this._warningClearTimeout) {\n        window.clearTimeout(_this._warningClearTimeout);\n      }\n\n      _this._warningClearTimeout = window.setTimeout(_this.clearWarning, WARNING_DISPLAY_TIMEOUT);\n    };\n\n    _this.clearWarning = function () {\n      if (_this.state.showWarning) {\n        _this.setState({\n          showWarning: false\n        });\n      }\n    };\n\n    _this.zoomAroundMouse = function (zoomDiff, event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      var zoom = _this.state.zoom;\n      var _this$props3 = _this.props,\n          minZoom = _this$props3.minZoom,\n          maxZoom = _this$props3.maxZoom,\n          zoomSnap = _this$props3.zoomSnap;\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (!_this._mousePosition || zoom === minZoom && zoomDiff < 0 || zoom === maxZoom && zoomDiff > 0) {\n        return;\n      }\n\n      var latLngNow = _this.pixelToLatLng(_this._mousePosition);\n\n      var zoomTarget = zoom + zoomDiff;\n\n      if (zoomSnap) {\n        zoomTarget = zoomDiff < 0 ? Math.floor(zoomTarget) : Math.ceil(zoomTarget);\n      }\n\n      zoomTarget = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n      _this.setCenterZoomTarget(null, zoomTarget, false, latLngNow);\n    };\n\n    _this.zoomPlusDelta = function () {\n      return _this.state.zoom + _this.state.zoomDelta;\n    };\n\n    _this.pixelToLatLng = function (pixel, center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state7 = _this.state,\n          width = _this$state7.width,\n          height = _this$state7.height,\n          pixelDelta = _this$state7.pixelDelta;\n      var pointDiff = [(pixel[0] - width / 2 - (pixelDelta ? pixelDelta[0] : 0)) / 256.0, (pixel[1] - height / 2 - (pixelDelta ? pixelDelta[1] : 0)) / 256.0];\n      var tileX = lng2tile(center[1], zoom) + pointDiff[0];\n      var tileY = lat2tile(center[0], zoom) + pointDiff[1];\n      return [Math.max(absoluteMinMax[0], Math.min(absoluteMinMax[1], tile2lat(tileY, zoom))), Math.max(absoluteMinMax[2], Math.min(absoluteMinMax[3], tile2lng(tileX, zoom)))];\n    };\n\n    _this.latLngToPixel = function (latLng, center, zoom) {\n      if (center === void 0) {\n        center = _this.state.center;\n      }\n\n      if (zoom === void 0) {\n        zoom = _this.zoomPlusDelta();\n      }\n\n      var _this$state8 = _this.state,\n          width = _this$state8.width,\n          height = _this$state8.height,\n          pixelDelta = _this$state8.pixelDelta;\n      var tileCenterX = lng2tile(center[1], zoom);\n      var tileCenterY = lat2tile(center[0], zoom);\n      var tileX = lng2tile(latLng[1], zoom);\n      var tileY = lat2tile(latLng[0], zoom);\n      return [(tileX - tileCenterX) * 256.0 + width / 2 + (pixelDelta ? pixelDelta[0] : 0), (tileY - tileCenterY) * 256.0 + height / 2 + (pixelDelta ? pixelDelta[1] : 0)];\n    };\n\n    _this.calculateZoomCenter = function (center, coords, oldZoom, newZoom) {\n      var _this$state9 = _this.state,\n          width = _this$state9.width,\n          height = _this$state9.height;\n\n      var pixelBefore = _this.latLngToPixel(coords, center, oldZoom);\n\n      var pixelAfter = _this.latLngToPixel(coords, center, newZoom);\n\n      var newCenter = _this.pixelToLatLng([width / 2 + pixelAfter[0] - pixelBefore[0], height / 2 + pixelAfter[1] - pixelBefore[1]], center, newZoom);\n\n      return _this.limitCenterAtZoom(newCenter, newZoom);\n    };\n\n    _this.setRef = function (dom) {\n      _this._containerRef = dom;\n    };\n\n    _this.syncToProps = debounce(_this.syncToProps, DEBOUNCE_DELAY);\n    _this._lastZoom = (_ref = (_props$defaultZoom = props.defaultZoom) !== null && _props$defaultZoom !== void 0 ? _props$defaultZoom : props.zoom) !== null && _ref !== void 0 ? _ref : 14;\n    _this._lastCenter = (_ref2 = (_props$defaultCenter = props.defaultCenter) !== null && _props$defaultCenter !== void 0 ? _props$defaultCenter : props.center) !== null && _ref2 !== void 0 ? _ref2 : [0, 0];\n    _this.state = {\n      zoom: _this._lastZoom,\n      center: _this._lastCenter,\n      width: (_ref3 = (_props$width = props.width) !== null && _props$width !== void 0 ? _props$width : props.defaultWidth) !== null && _ref3 !== void 0 ? _ref3 : -1,\n      height: (_ref4 = (_props$height = props.height) !== null && _props$height !== void 0 ? _props$height : props.defaultHeight) !== null && _ref4 !== void 0 ? _ref4 : -1,\n      zoomDelta: 0,\n      pixelDelta: undefined,\n      oldTiles: [],\n      showWarning: false,\n      warningType: undefined\n    };\n    return _this;\n  }\n\n  var _proto = Map.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    this.props.mouseEvents && this.bindMouseEvents();\n    this.props.touchEvents && this.bindTouchEvents();\n\n    if (!this.props.width || !this.props.height) {\n      if (!this.updateWidthHeight()) {\n        requestAnimationFrame(this.updateWidthHeight);\n      }\n\n      this.bindResizeEvent();\n    }\n\n    this.bindWheelEvent();\n    this.syncToProps();\n\n    if (typeof window.ResizeObserver !== 'undefined') {\n      this._resizeObserver = new window.ResizeObserver(function () {\n        _this2.updateWidthHeight();\n      });\n\n      this._resizeObserver.observe(this._containerRef);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.props.mouseEvents && this.unbindMouseEvents();\n    this.props.touchEvents && this.unbindTouchEvents();\n    this.unbindWheelEvent();\n\n    if (!this.props.width || !this.props.height) {\n      this.unbindResizeEvent();\n    }\n\n    if (this._resizeObserver) {\n      this._resizeObserver.disconnect();\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _prevProps$center;\n\n    if (this.props.mouseEvents !== prevProps.mouseEvents) {\n      this.props.mouseEvents ? this.bindMouseEvents() : this.unbindMouseEvents();\n    }\n\n    if (this.props.touchEvents !== prevProps.touchEvents) {\n      this.props.touchEvents ? this.bindTouchEvents() : this.unbindTouchEvents();\n    }\n\n    if (this.props.width && this.props.width !== prevProps.width) {\n      this.setState({\n        width: this.props.width\n      });\n    }\n\n    if (this.props.height && this.props.height !== prevProps.height) {\n      this.setState({\n        height: this.props.height\n      });\n    }\n\n    if (!this.props.center && !this.props.zoom) {\n      return;\n    }\n\n    if ((!this.props.center || this.props.center[0] === (prevProps === null || prevProps === void 0 ? void 0 : (_prevProps$center = prevProps.center) === null || _prevProps$center === void 0 ? void 0 : _prevProps$center[0]) && this.props.center[1] === prevProps.center[1]) && this.props.zoom === prevProps.zoom) {\n      return;\n    }\n\n    var currentCenter = this._isAnimating ? this._centerTarget : this.state.center;\n    var currentZoom = this._isAnimating ? this._zoomTarget : this.state.zoom;\n\n    if (currentCenter && currentZoom) {\n      var _this$props$center, _this$props$zoom;\n\n      var nextCenter = (_this$props$center = this.props.center) !== null && _this$props$center !== void 0 ? _this$props$center : currentCenter;\n      var nextZoom = (_this$props$zoom = this.props.zoom) !== null && _this$props$zoom !== void 0 ? _this$props$zoom : currentZoom;\n\n      if (Math.abs(nextZoom - currentZoom) > 0.001 || Math.abs(nextCenter[0] - currentCenter[0]) > 0.0001 || Math.abs(nextCenter[1] - currentCenter[1]) > 0.0001) {\n        this.setCenterZoomTarget(nextCenter, nextZoom, true);\n      }\n    }\n  };\n\n  _proto.coordsInside = function coordsInside(pixel) {\n    var _this$state10 = this.state,\n        width = _this$state10.width,\n        height = _this$state10.height;\n\n    if (pixel[0] < 0 || pixel[1] < 0 || pixel[0] >= width || pixel[1] >= height) {\n      return false;\n    }\n\n    var parent = this._containerRef;\n\n    if (parent) {\n      var pos = parentPosition(parent);\n      var element = document.elementFromPoint(pixel[0] + pos.x, pixel[1] + pos.y);\n      return parent === element || parent.contains(element);\n    } else {\n      return false;\n    }\n  };\n\n  _proto.tileValues = function tileValues(_ref5) {\n    var center = _ref5.center,\n        zoom = _ref5.zoom,\n        pixelDelta = _ref5.pixelDelta,\n        zoomDelta = _ref5.zoomDelta,\n        width = _ref5.width,\n        height = _ref5.height;\n    var roundedZoom = Math.round(zoom + (zoomDelta || 0));\n    var zoomDiff = zoom + (zoomDelta || 0) - roundedZoom;\n    var scale = Math.pow(2, zoomDiff);\n    var scaleWidth = width / scale;\n    var scaleHeight = height / scale;\n    var tileCenterX = lng2tile(center[1], roundedZoom) - (pixelDelta ? pixelDelta[0] / 256.0 / scale : 0);\n    var tileCenterY = lat2tile(center[0], roundedZoom) - (pixelDelta ? pixelDelta[1] / 256.0 / scale : 0);\n    var halfWidth = scaleWidth / 2 / 256.0;\n    var halfHeight = scaleHeight / 2 / 256.0;\n    var tileMinX = Math.floor(tileCenterX - halfWidth);\n    var tileMaxX = Math.floor(tileCenterX + halfWidth);\n    var tileMinY = Math.floor(tileCenterY - halfHeight);\n    var tileMaxY = Math.floor(tileCenterY + halfHeight);\n    return {\n      tileMinX: tileMinX,\n      tileMaxX: tileMaxX,\n      tileMinY: tileMinY,\n      tileMaxY: tileMaxY,\n      tileCenterX: tileCenterX,\n      tileCenterY: tileCenterY,\n      roundedZoom: roundedZoom,\n      zoomDelta: zoomDelta || 0,\n      scaleWidth: scaleWidth,\n      scaleHeight: scaleHeight,\n      scale: scale\n    };\n  };\n\n  _proto.renderTiles = function renderTiles() {\n    var _this3 = this;\n\n    var _this$state11 = this.state,\n        oldTiles = _this$state11.oldTiles,\n        width = _this$state11.width,\n        height = _this$state11.height;\n    var dprs = this.props.dprs;\n    var mapUrl = this.props.provider || osm;\n\n    var _this$tileValues = this.tileValues(this.state),\n        tileMinX = _this$tileValues.tileMinX,\n        tileMaxX = _this$tileValues.tileMaxX,\n        tileMinY = _this$tileValues.tileMinY,\n        tileMaxY = _this$tileValues.tileMaxY,\n        tileCenterX = _this$tileValues.tileCenterX,\n        tileCenterY = _this$tileValues.tileCenterY,\n        roundedZoom = _this$tileValues.roundedZoom,\n        scaleWidth = _this$tileValues.scaleWidth,\n        scaleHeight = _this$tileValues.scaleHeight,\n        scale = _this$tileValues.scale;\n\n    var tiles = [];\n\n    for (var i = 0; i < oldTiles.length; i++) {\n      var old = oldTiles[i];\n      var zoomDiff = old.roundedZoom - roundedZoom;\n\n      if (Math.abs(zoomDiff) > 4 || zoomDiff === 0) {\n        continue;\n      }\n\n      var pow = 1 / Math.pow(2, zoomDiff);\n      var xDiff = -(tileMinX - old.tileMinX * pow) * 256;\n      var yDiff = -(tileMinY - old.tileMinY * pow) * 256;\n\n      var _xMin = Math.max(old.tileMinX, 0);\n\n      var _yMin = Math.max(old.tileMinY, 0);\n\n      var _xMax = Math.min(old.tileMaxX, Math.pow(2, old.roundedZoom) - 1);\n\n      var _yMax = Math.min(old.tileMaxY, Math.pow(2, old.roundedZoom) - 1);\n\n      for (var x = _xMin; x <= _xMax; x++) {\n        for (var y = _yMin; y <= _yMax; y++) {\n          tiles.push({\n            key: x + \"-\" + y + \"-\" + old.roundedZoom,\n            url: mapUrl(x, y, old.roundedZoom),\n            srcSet: srcSet(dprs, mapUrl, x, y, old.roundedZoom),\n            left: xDiff + (x - old.tileMinX) * 256 * pow,\n            top: yDiff + (y - old.tileMinY) * 256 * pow,\n            width: 256 * pow,\n            height: 256 * pow,\n            active: false\n          });\n        }\n      }\n    }\n\n    var xMin = Math.max(tileMinX, 0);\n    var yMin = Math.max(tileMinY, 0);\n    var xMax = Math.min(tileMaxX, Math.pow(2, roundedZoom) - 1);\n    var yMax = Math.min(tileMaxY, Math.pow(2, roundedZoom) - 1);\n\n    for (var _x = xMin; _x <= xMax; _x++) {\n      for (var _y = yMin; _y <= yMax; _y++) {\n        tiles.push({\n          key: _x + \"-\" + _y + \"-\" + roundedZoom,\n          url: mapUrl(_x, _y, roundedZoom),\n          srcSet: srcSet(dprs, mapUrl, _x, _y, roundedZoom),\n          left: (_x - tileMinX) * 256,\n          top: (_y - tileMinY) * 256,\n          width: 256,\n          height: 256,\n          active: true\n        });\n      }\n    }\n\n    var boxStyle = {\n      width: scaleWidth,\n      height: scaleHeight,\n      position: 'absolute',\n      top: \"calc((100% - \" + height + \"px) / 2)\",\n      left: \"calc((100% - \" + width + \"px) / 2)\",\n      overflow: 'hidden',\n      willChange: 'transform',\n      transform: \"scale(\" + scale + \", \" + scale + \")\",\n      transformOrigin: 'top left'\n    };\n    var boxClassname = this.props.boxClassname || 'pigeon-tiles-box';\n    var left = -((tileCenterX - tileMinX) * 256 - scaleWidth / 2);\n    var top = -((tileCenterY - tileMinY) * 256 - scaleHeight / 2);\n    var tilesStyle = {\n      position: 'absolute',\n      width: (tileMaxX - tileMinX + 1) * 256,\n      height: (tileMaxY - tileMinY + 1) * 256,\n      willChange: 'transform',\n      transform: \"translate(\" + left + \"px, \" + top + \"px)\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: boxStyle,\n      className: boxClassname\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pigeon-tiles\",\n      style: tilesStyle\n    }, tiles.map(function (tile) {\n      return /*#__PURE__*/React.createElement(\"img\", {\n        key: tile.key,\n        src: tile.url,\n        srcSet: tile.srcSet,\n        width: tile.width,\n        height: tile.height,\n        loading: 'lazy',\n        onLoad: function onLoad() {\n          return _this3.imageLoaded(tile.key);\n        },\n        alt: '',\n        style: {\n          position: 'absolute',\n          left: tile.left,\n          top: tile.top,\n          willChange: 'transform',\n          transformOrigin: 'top left',\n          opacity: 1\n        }\n      });\n    })));\n  };\n\n  _proto.renderOverlays = function renderOverlays() {\n    var _this4 = this;\n\n    var _this$state12 = this.state,\n        width = _this$state12.width,\n        height = _this$state12.height,\n        center = _this$state12.center;\n    var mapState = {\n      bounds: this.getBounds(),\n      zoom: this.zoomPlusDelta(),\n      center: center,\n      width: width,\n      height: height\n    };\n    var childrenWithProps = React.Children.map(this.props.children, function (child) {\n      if (!child) {\n        return null;\n      }\n\n      if (! /*#__PURE__*/React.isValidElement(child)) {\n        return child;\n      }\n\n      var _child$props = child.props,\n          anchor = _child$props.anchor,\n          position = _child$props.position,\n          offset = _child$props.offset;\n\n      var c = _this4.latLngToPixel(anchor || position || center);\n\n      return /*#__PURE__*/React.cloneElement(child, {\n        left: c[0] - (offset ? offset[0] : 0),\n        top: c[1] - (offset ? offset[1] : 0),\n        latLngToPixel: _this4.latLngToPixel,\n        pixelToLatLng: _this4.pixelToLatLng,\n        setCenterZoom: _this4.setCenterZoomForChildren,\n        mapProps: _this4.props,\n        mapState: mapState\n      });\n    });\n    var childrenStyle = {\n      position: 'absolute',\n      width: width,\n      height: height,\n      top: \"calc((100% - \" + height + \"px) / 2)\",\n      left: \"calc((100% - \" + width + \"px) / 2)\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pigeon-overlays\",\n      style: childrenStyle\n    }, childrenWithProps);\n  };\n\n  _proto.renderAttribution = function renderAttribution() {\n    var _this$props4 = this.props,\n        attribution = _this$props4.attribution,\n        attributionPrefix = _this$props4.attributionPrefix;\n\n    if (attribution === false) {\n      return null;\n    }\n\n    var style = {\n      position: 'absolute',\n      bottom: 0,\n      right: 0,\n      fontSize: '11px',\n      padding: '2px 5px',\n      background: 'rgba(255, 255, 255, 0.7)',\n      fontFamily: \"'Helvetica Neue', Helvetica, Arial, sans-serif\",\n      color: '#333'\n    };\n    var linkStyle = {\n      color: '#0078A8',\n      textDecoration: 'none'\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: \"attr\",\n      className: \"pigeon-attribution\",\n      style: style\n    }, attributionPrefix === false ? null : /*#__PURE__*/React.createElement(\"span\", null, attributionPrefix || /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://pigeon-maps.js.org/\",\n      style: linkStyle,\n      target: \"_blank\",\n      rel: \"noreferrer noopener\"\n    }, \"Pigeon\"), ' | '), attribution || /*#__PURE__*/React.createElement(\"span\", null, ' © ', /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://www.openstreetmap.org/copyright\",\n      style: linkStyle,\n      target: \"_blank\",\n      rel: \"noreferrer noopener\"\n    }, \"OpenStreetMap\"), ' contributors'));\n  };\n\n  _proto.renderWarning = function renderWarning() {\n    var _this$props5 = this.props,\n        metaWheelZoom = _this$props5.metaWheelZoom,\n        metaWheelZoomWarning = _this$props5.metaWheelZoomWarning,\n        twoFingerDrag = _this$props5.twoFingerDrag,\n        twoFingerDragWarning = _this$props5.twoFingerDragWarning,\n        warningZIndex = _this$props5.warningZIndex;\n    var _this$state13 = this.state,\n        showWarning = _this$state13.showWarning,\n        warningType = _this$state13.warningType,\n        width = _this$state13.width,\n        height = _this$state13.height;\n\n    if (metaWheelZoom && metaWheelZoomWarning || twoFingerDrag && twoFingerDragWarning) {\n      var style = {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: width,\n        height: height,\n        overflow: 'hidden',\n        pointerEvents: 'none',\n        opacity: showWarning ? 100 : 0,\n        transition: 'opacity 300ms',\n        background: 'rgba(0,0,0,0.5)',\n        color: '#fff',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        fontSize: 22,\n        fontFamily: '\"Arial\", sans-serif',\n        textAlign: 'center',\n        zIndex: warningZIndex\n      };\n      var meta = typeof window !== 'undefined' && window.navigator && window.navigator.platform.toUpperCase().indexOf('MAC') >= 0 ? '⌘' : 'ctrl';\n      var warningText = warningType === 'fingers' ? twoFingerDragWarning : metaWheelZoomWarning;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pigeon-overlay-warning\",\n        style: style\n      }, warningText.replace('META', meta));\n    } else {\n      return null;\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props6 = this.props,\n        touchEvents = _this$props6.touchEvents,\n        twoFingerDrag = _this$props6.twoFingerDrag;\n    var _this$state14 = this.state,\n        width = _this$state14.width,\n        height = _this$state14.height;\n    var containerStyle = {\n      width: this.props.width ? width : '100%',\n      height: this.props.height ? height : '100%',\n      position: 'relative',\n      display: 'inline-block',\n      overflow: 'hidden',\n      background: '#dddddd',\n      touchAction: touchEvents ? twoFingerDrag ? 'pan-x pan-y' : 'none' : 'auto'\n    };\n    var hasSize = !!(width && height);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: containerStyle,\n      ref: this.setRef\n    }, hasSize && this.renderTiles(), hasSize && this.renderOverlays(), hasSize && this.renderAttribution(), hasSize && this.renderWarning());\n  };\n\n  return Map;\n}(Component);\nMap.defaultProps = {\n  animate: true,\n  metaWheelZoom: false,\n  metaWheelZoomWarning: 'Use META + wheel to zoom!',\n  twoFingerDrag: false,\n  twoFingerDragWarning: 'Use two fingers to move the map',\n  zoomSnap: true,\n  mouseEvents: true,\n  touchEvents: true,\n  warningZIndex: 100,\n  animateMaxScreens: 5,\n  minZoom: 1,\n  maxZoom: 18,\n  limitBounds: 'center',\n  dprs: []\n};\n\nfunction Marker(props) {\n  var width = typeof props.width !== 'undefined' ? props.width : typeof props.height !== 'undefined' ? props.height * 29 / 34 : 29;\n  var height = typeof props.height !== 'undefined' ? props.height : typeof props.width !== 'undefined' ? props.width * 34 / 29 : 34;\n\n  var _useState = useState(props.hover || false),\n      internalHover = _useState[0],\n      setInternalHover = _useState[1];\n\n  var hover = typeof props.hover === 'undefined' ? internalHover : props.hover;\n  var color = props.color || '#93C0D0';\n\n  var eventParameters = function eventParameters(event) {\n    return {\n      event: event,\n      anchor: props.anchor,\n      payload: props.payload\n    };\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2({\n      position: 'absolute',\n      transform: \"translate(\" + (props.left - width / 2) + \"px, \" + (props.top - (height - 1)) + \"px)\",\n      filter: hover ? 'drop-shadow(0 0 4px rgba(0, 0, 0, .3))' : '',\n      pointerEvents: 'none',\n      cursor: 'pointer'\n    }, props.style || {}),\n    className: props.className ? props.className + \" pigeon-click-block\" : 'pigeon-click-block'\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    viewBox: \"0 0 61 71\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    style: {\n      pointerEvents: 'auto'\n    },\n    onClick: props.onClick ? function (event) {\n      return props.onClick(eventParameters(event));\n    } : null,\n    onContextMenu: props.onContextMenu ? function (event) {\n      return props.onContextMenu(eventParameters(event));\n    } : null,\n    onMouseOver: function onMouseOver(event) {\n      props.onMouseOver && props.onMouseOver(eventParameters(event));\n      setInternalHover(true);\n    },\n    onMouseOut: function onMouseOut(event) {\n      props.onMouseOut && props.onMouseOut(eventParameters(event));\n      setInternalHover(false);\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M52 31.5C52 36.8395 49.18 42.314 45.0107 47.6094C40.8672 52.872 35.619 57.678 31.1763 61.6922C30.7916 62.0398 30.2084 62.0398 29.8237 61.6922C25.381 57.678 20.1328 52.872 15.9893 47.6094C11.82 42.314 9 36.8395 9 31.5C9 18.5709 18.6801 9 30.5 9C42.3199 9 52 18.5709 52 31.5Z\",\n    fill: color,\n    stroke: \"white\",\n    strokeWidth: \"4\"\n  }), /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"30.5\",\n    cy: \"30.5\",\n    r: \"8.5\",\n    fill: \"white\",\n    opacity: hover ? 0.98 : 0.6\n  }))));\n}\n\nfunction Overlay(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2({\n      position: 'absolute',\n      transform: \"translate(\" + props.left + \"px, \" + props.top + \"px)\"\n    }, props.style || {}),\n    className: props.className ? props.className + \" pigeon-click-block\" : 'pigeon-click-block'\n  }, props.children);\n}\n\nfunction isDescendentOf(element, ancestor) {\n  while (element) {\n    if (element === ancestor) {\n      return true;\n    }\n\n    element = element.parentElement;\n  }\n\n  return false;\n}\n\nvar defaultState = {\n  isDragging: false,\n  startX: undefined,\n  startY: undefined,\n  startLeft: undefined,\n  startTop: undefined,\n  deltaX: 0,\n  deltaY: 0\n};\nfunction Draggable(props) {\n  var dragRef = useRef();\n  var propsRef = useRef(props);\n  var stateRef = useRef(_objectSpread2({}, defaultState));\n\n  var _useState = useState(defaultState),\n      _state = _useState[0],\n      _setState = _useState[1];\n\n  propsRef.current = props;\n\n  var setState = function setState(stateUpdate) {\n    var newState = _objectSpread2(_objectSpread2({}, stateRef.current), stateUpdate);\n\n    stateRef.current = newState;\n\n    _setState(newState);\n  };\n\n  var _props$mapProps = props.mapProps,\n      mouseEvents = _props$mapProps.mouseEvents,\n      touchEvents = _props$mapProps.touchEvents;\n  useEffect(function () {\n    var handleDragStart = function handleDragStart(event) {\n      if (isDescendentOf(event.target, dragRef.current)) {\n        event.preventDefault();\n        setState({\n          isDragging: true,\n          startX: ('touches' in event ? event.touches[0] : event).clientX,\n          startY: ('touches' in event ? event.touches[0] : event).clientY,\n          startLeft: propsRef.current.left,\n          startTop: propsRef.current.top,\n          deltaX: 0,\n          deltaY: 0\n        });\n\n        if (propsRef.current.onDragStart) {\n          var _propsRef$current = propsRef.current,\n              _left = _propsRef$current.left,\n              _top = _propsRef$current.top,\n              offset = _propsRef$current.offset,\n              pixelToLatLng = _propsRef$current.pixelToLatLng;\n          propsRef.current.onDragMove(pixelToLatLng([_left + (offset ? offset[0] : 0), _top + (offset ? offset[1] : 0)]));\n        }\n      }\n    };\n\n    var handleDragMove = function handleDragMove(event) {\n      if (!stateRef.current.isDragging) {\n        return;\n      }\n\n      event.preventDefault();\n      var x = ('touches' in event ? event.touches[0] : event).clientX;\n      var y = ('touches' in event ? event.touches[0] : event).clientY;\n      var deltaX = x - stateRef.current.startX;\n      var deltaY = y - stateRef.current.startY;\n      setState({\n        deltaX: deltaX,\n        deltaY: deltaY\n      });\n\n      if (propsRef.current.onDragMove) {\n        var _propsRef$current2 = propsRef.current,\n            offset = _propsRef$current2.offset,\n            pixelToLatLng = _propsRef$current2.pixelToLatLng;\n        var _stateRef$current = stateRef.current,\n            _startLeft = _stateRef$current.startLeft,\n            _startTop = _stateRef$current.startTop;\n        propsRef.current.onDragMove(pixelToLatLng([_startLeft + deltaX + (offset ? offset[0] : 0), _startTop + deltaY + (offset ? offset[1] : 0)]));\n      }\n    };\n\n    var handleDragEnd = function handleDragEnd(event) {\n      var _propsRef$current$onD, _propsRef$current4;\n\n      if (!stateRef.current.isDragging) {\n        return;\n      }\n\n      event.preventDefault();\n      var _propsRef$current3 = propsRef.current,\n          offset = _propsRef$current3.offset,\n          pixelToLatLng = _propsRef$current3.pixelToLatLng;\n      var _stateRef$current2 = stateRef.current,\n          deltaX = _stateRef$current2.deltaX,\n          deltaY = _stateRef$current2.deltaY,\n          startLeft = _stateRef$current2.startLeft,\n          startTop = _stateRef$current2.startTop;\n      (_propsRef$current$onD = (_propsRef$current4 = propsRef.current).onDragEnd) === null || _propsRef$current$onD === void 0 ? void 0 : _propsRef$current$onD.call(_propsRef$current4, pixelToLatLng([startLeft + deltaX + (offset ? offset[0] : 0), startTop + deltaY + (offset ? offset[1] : 0)]));\n      setState({\n        isDragging: false,\n        startX: undefined,\n        startY: undefined,\n        startLeft: undefined,\n        startTop: undefined,\n        deltaX: 0,\n        deltaY: 0\n      });\n    };\n\n    var wa = function wa(e, t, o) {\n      return window.addEventListener(e, t, o);\n    };\n\n    var wr = function wr(e, t) {\n      return window.removeEventListener(e, t);\n    };\n\n    if (mouseEvents) {\n      wa('mousedown', handleDragStart);\n      wa('mousemove', handleDragMove);\n      wa('mouseup', handleDragEnd);\n    }\n\n    if (touchEvents) {\n      wa('touchstart', handleDragStart, {\n        passive: false\n      });\n      wa('touchmove', handleDragMove, {\n        passive: false\n      });\n      wa('touchend', handleDragEnd, {\n        passive: false\n      });\n    }\n\n    return function () {\n      if (mouseEvents) {\n        wr('mousedown', handleDragStart);\n        wr('mousemove', handleDragMove);\n        wr('mouseup', handleDragEnd);\n      }\n\n      if (touchEvents) {\n        wr('touchstart', handleDragStart);\n        wr('touchmove', handleDragMove);\n        wr('touchend', handleDragEnd);\n      }\n    };\n  }, [mouseEvents, touchEvents]);\n  var left = props.left,\n      top = props.top,\n      className = props.className,\n      style = props.style;\n  var deltaX = _state.deltaX,\n      deltaY = _state.deltaY,\n      startLeft = _state.startLeft,\n      startTop = _state.startTop,\n      isDragging = _state.isDragging;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: _objectSpread2(_objectSpread2({\n      cursor: isDragging ? 'grabbing' : 'grab'\n    }, style || {}), {}, {\n      position: 'absolute',\n      transform: \"translate(\" + (isDragging ? startLeft + deltaX : left) + \"px, \" + (isDragging ? startTop + deltaY : top) + \"px)\"\n    }),\n    ref: dragRef,\n    className: \"pigeon-drag-block\" + (className ? \" \" + className : '')\n  }, props.children);\n}\n\nvar commonStyle = {\n  position: 'absolute',\n  top: 10,\n  left: 10\n};\nvar commonButtonStyle = {\n  width: 28,\n  height: 28,\n  borderRadius: 2,\n  boxShadow: '0 1px 4px -1px rgba(0,0,0,.3)',\n  background: 'white',\n  lineHeight: '26px',\n  fontSize: '20px',\n  fontWeight: 700,\n  color: '#666',\n  marginBottom: 1,\n  cursor: 'pointer',\n  border: 'none',\n  display: 'block',\n  outline: 'none'\n};\nfunction ZoomControl(_ref) {\n  var style = _ref.style,\n      buttonStyle = _ref.buttonStyle,\n      setCenterZoom = _ref.setCenterZoom,\n      mapState = _ref.mapState,\n      mapProps = _ref.mapProps;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pigeon-zoom-buttons pigeon-drag-block\",\n    style: style ? _objectSpread2(_objectSpread2({}, commonStyle), style) : commonStyle\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"pigeon-zoom-in\",\n    style: buttonStyle ? _objectSpread2(_objectSpread2({}, commonButtonStyle), buttonStyle) : commonButtonStyle,\n    onClick: function onClick() {\n      return setCenterZoom(mapState.center, Math.min(mapState.zoom + 1, mapProps.maxZoom));\n    }\n  }, \"+\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"pigeon-zoom-out\",\n    style: buttonStyle ? _objectSpread2(_objectSpread2({}, commonButtonStyle), buttonStyle) : commonButtonStyle,\n    onClick: function onClick() {\n      return setCenterZoom(mapState.center, Math.max(mapState.zoom - 1, mapProps.minZoom));\n    }\n  }, \"\\u2013\"));\n}\n\nexport { Draggable, Map, Marker, Overlay, ZoomControl };\n"]},"metadata":{},"sourceType":"module"}